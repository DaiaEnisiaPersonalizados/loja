import{a as Lt}from"./chunk-54LLRSOY.js";import{$b as Ce,$c as ae,A as ie,Ab as it,C as Te,Ca as l,Da as s,Ea as w,F as T,Fa as be,G as Xe,Ga as ye,Gd as Fe,H as Mt,Hb as Vt,Hd as ue,I as Pt,Ib as $,Jd as Ht,K as Nt,Ka as R,Kb as C,L as y,M as L,Ma as g,Mb as G,N as V,Na as Et,Nb as J,O as _,Oa as Tt,Oc as Dt,Od as X,Pd as je,Qb as K,Qd as ee,Rb as Y,Rd as de,Sb as At,T as k,Tb as Q,U as A,Ub as Le,Uc as qt,V as kt,Va as re,Vb as Ve,Vc as Ae,Wa as d,Xa as x,Xb as rt,Ya as we,Yb as ot,Za as se,Zb as P,_b as j,_d as $t,a as Qe,aa as xt,ad as De,b as wt,bb as It,bd as Ft,be as Gt,ca as Ie,cd as jt,ed as Bt,ee as Jt,fe as Kt,ga as _e,ha as a,ia as m,ib as oe,id as le,j as Ze,jd as Z,k as fe,ka as St,kb as F,kd as ce,ld as Wt,m as b,md as zt,n as Ct,oa as Ot,ob as Rt,p as f,pd as qe,qb as U,ra as h,rb as D,sa as O,ta as u,v as vt,va as E,vb as H,w as S,wb as Re,xb as et,xd as Ut,yb as tt,zb as nt}from"./chunk-M3I5HJ6Y.js";var Tn=["*"];var Be=[],In={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:Be},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:Be},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:Be},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:Be},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},I=new V("Nebular Auth Options"),Yt=new V("Nebular User Auth Options"),st=new V("Nebular Auth Strategies"),Qt=new V("Nebular Auth Tokens"),Rn=new V("Nebular Simple Interceptor Header"),$e=new V("Nebular Interceptor Filter"),me=function(...t){if(arguments.length<1||typeof arguments[0]!="object")return!1;if(arguments.length<2)return arguments[0];let r=arguments[0],e=Array.prototype.slice.call(arguments,1),n,o;return e.forEach(function(i){typeof i!="object"||Array.isArray(i)||Object.keys(i).forEach(function(c){if(o=r[c],n=i[c],n!==r)if(typeof n!="object"||n===null){r[c]=n;return}else if(Array.isArray(n)){r[c]=en(n);return}else if(Zt(n)){r[c]=Xt(n);return}else if(typeof o!="object"||o===null||Array.isArray(o)){r[c]=me({},n);return}else{r[c]=me(o,n);return}})}),r};function Zt(t){return t instanceof Date||t instanceof RegExp}function Xt(t){if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("cloneSpecificValue: Unexpected situation")}function en(t){let r=[];return t.forEach(function(e,n){typeof e=="object"&&e!==null?Array.isArray(e)?r[n]=en(e):Zt(e)?r[n]=Xt(e):r[n]=me({},e):r[n]=e}),r}function We(t={},r,e){let n=r.split("."),o=me({},t||{});return n.forEach(i=>{o&&typeof o[i]<"u"?o=o[i]:o=void 0}),typeof o>"u"?e:o}function Ln(t){let r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:{r+="==";break}case 3:{r+="=";break}default:throw new Error("Illegal base64url string!")}return An(r)}function Vn(t){let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="";if(t=String(t).replace(/=+$/,""),t.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n=0,o,i,c=0;i=t.charAt(c++);~i&&(o=n%4?o*64+i:i,n++%4)?e+=String.fromCharCode(255&o>>(-2*n&6)):0)i=r.indexOf(i);return e}function An(t){return decodeURIComponent(Array.prototype.map.call(Vn(t),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}var at=class{constructor(){this.payload=null}getName(){return this.constructor.NAME}getPayload(){return this.payload}},Me=class extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}},te=class extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}},ze=class extends te{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}},ve=class extends te{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}};function tn(t,r,e,n){return new t(r,e,n)}function Dn(t){if(t.length===0)throw new ze("Cannot extract from an empty payload.");let r=t.split(".");if(r.length!==3)throw new ve(`The payload ${t} is not valid JWT payload and must consist of three parts.`);let e;try{e=Ln(r[1])}catch{throw new ve(`The payload ${t} is not valid JWT payload and cannot be parsed.`)}if(!e)throw new ve(`The payload ${t} is not valid JWT payload and cannot be decoded.`);return JSON.parse(e)}var xe=(()=>{class t extends at{constructor(e,n,o){super(),this.token=e,this.ownerStrategyName=n,this.createdAt=o;try{this.parsePayload()}catch(i){if(!(i instanceof Me))throw i}this.createdAt=this.prepareCreatedAt(o)}parsePayload(){this.payload=null}prepareCreatedAt(e){return e||new Date}getCreatedAt(){return this.createdAt}getValue(){return this.token}getOwnerStrategyName(){return this.ownerStrategyName}isValid(){return!!this.getValue()}toString(){return this.token?this.token:""}}return t.NAME="nb:auth:simple:token",t})(),nn=(()=>{class t extends xe{prepareCreatedAt(e){let n=this.getPayload();return n&&n.iat?new Date(Number(n.iat)*1e3):super.prepareCreatedAt(e)}parsePayload(){if(!this.token)throw new Me("Token not found. ");this.payload=Dn(this.token)}getTokenExpDate(){let e=this.getPayload();if(e&&!e.hasOwnProperty("exp"))return null;let n=new Date(0);return n.setUTCSeconds(e.exp),n}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}return t.NAME="nb:auth:jwt:token",t})(),qn=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{}return t},Fn=(()=>{class t extends xe{constructor(e={},n,o){super(qn(e),n,o)}getValue(){return this.token.access_token}getRefreshToken(){return this.token.refresh_token}setRefreshToken(e){this.token.refresh_token=e}parsePayload(){if(this.token){if(!Object.keys(this.token).length)throw new ze("Cannot extract payload from an empty token.")}else throw new Me("Token not found.");this.payload=this.token}getType(){return this.token.token_type}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}getTokenExpDate(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+Number(this.token.expires_in)*1e3):null}toString(){return JSON.stringify(this.token)}}return t.NAME="nb:auth:oauth2:token",t})();var rn=new V("Nebular Auth Options"),on=(()=>{class t{constructor(e,n){this.fallbackClass=e,this.tokenClasses=n}wrap(e){return JSON.stringify({name:e.getName(),ownerStrategyName:e.getOwnerStrategyName(),createdAt:e.getCreatedAt().getTime(),value:e.toString()})}unwrap(e){let n=this.fallbackClass,o="",i="",c=null,p=this.parseTokenPack(e);return p&&(n=this.getClassByName(p.name)||this.fallbackClass,o=p.value,i=p.ownerStrategyName,c=new Date(Number(p.createdAt))),tn(n,o,i,c)}getClassByName(e){return this.tokenClasses.find(n=>n.NAME===e)}parseTokenPack(e){try{return JSON.parse(e)}catch{}return null}}return t.\u0275fac=function(e){return new(e||t)(_(rn),_(Qt))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),Pe=class{},Ge=(()=>{class t extends Pe{constructor(e){super(),this.parceler=e,this.key="auth_app_token"}get(){let e=localStorage.getItem(this.key);return this.parceler.unwrap(e)}set(e){let n=this.parceler.wrap(e);localStorage.setItem(this.key,n)}clear(){localStorage.removeItem(this.key)}}return t.\u0275fac=function(e){return new(e||t)(_(on))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),sn=(()=>{class t{constructor(e){this.tokenStorage=e,this.token$=new fe(null),this.publishStoredToken()}tokenChange(){return this.token$.pipe(vt(e=>!!e),Te())}set(e){return this.tokenStorage.set(e),this.publishStoredToken(),b(null)}get(){let e=this.tokenStorage.get();return b(e)}clear(){return this.tokenStorage.clear(),this.publishStoredToken(),b(null)}publishStoredToken(){this.token$.next(this.tokenStorage.get())}}return t.\u0275fac=function(e){return new(e||t)(_(Pe))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();var M=(()=>{class t{constructor(e,n){this.tokenService=e,this.strategies=n}getToken(){return this.tokenService.get()}isAuthenticated(){return this.getToken().pipe(f(e=>e.isValid()))}isAuthenticatedOrRefresh(){return this.getToken().pipe(T(e=>e.getValue()&&!e.isValid()?this.refreshToken(e.getOwnerStrategyName(),e).pipe(T(n=>n.isSuccess()?this.isAuthenticated():b(!1))):b(e.isValid())))}onTokenChange(){return this.tokenService.tokenChange()}onAuthenticationChange(){return this.onTokenChange().pipe(f(e=>e.isValid()))}authenticate(e,n){return this.getStrategy(e).authenticate(n).pipe(T(o=>this.processResultToken(o)))}register(e,n){return this.getStrategy(e).register(n).pipe(T(o=>this.processResultToken(o)))}logout(e){return this.getStrategy(e).logout().pipe(T(n=>(n.isSuccess()&&this.tokenService.clear().pipe(f(()=>n)),b(n))))}requestPassword(e,n){return this.getStrategy(e).requestPassword(n)}resetPassword(e,n){return this.getStrategy(e).resetPassword(n)}refreshToken(e,n){return this.getStrategy(e).refreshToken(n).pipe(T(o=>this.processResultToken(o)))}getStrategy(e){let n=this.strategies.find(o=>o.getName()===e);if(!n)throw new TypeError(`There is no Auth Strategy registered under '${e}' name`);return n}processResultToken(e){return e.isSuccess()&&e.getToken()?this.tokenService.set(e.getToken()).pipe(f(n=>e)):b(e)}}return t.\u0275fac=function(e){return new(e||t)(_(sn),_(st))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),Ne=class{setOptions(r){this.options=me({},this.defaultOptions,r)}getOption(r){return We(this.options,r,null)}createToken(r,e){let n=tn(this.getOption("token.class"),r,this.getName());if(e&&!n.isValid())throw new te("Token is empty or invalid.");return n}getName(){return this.getOption("name")}createFailResponse(r){return new et({body:{},status:401})}createSuccessResponse(r){return new et({body:{},status:200})}getActionEndpoint(r){let e=this.getOption(`${r}.endpoint`),n=this.getOption("baseEndpoint");return e?n+e:""}getHeaders(){let r=this.getOption("headers")??{};if(r instanceof Re)return r;let e=new Re;return Object.entries(r).forEach(([n,o])=>{e=e.append(n,o)}),e}},v=class{constructor(r,e,n,o,i,c=null){this.success=r,this.response=e,this.redirect=n,this.errors=[],this.messages=[],this.errors=this.errors.concat([o]),o instanceof Array&&(this.errors=o),this.messages=this.messages.concat([i]),i instanceof Array&&(this.messages=i),this.token=c}getResponse(){return this.response}getToken(){return this.token}getRedirect(){return this.redirect}getErrors(){return this.errors.filter(r=>!!r)}getMessages(){return this.messages.filter(r=>!!r)}isSuccess(){return this.success}isFailure(){return!this.success}},ke=class{};var lt=class extends ke{constructor(){super(...arguments),this.token={class:xe},this.delay=1e3,this.alwaysFail=!1}},jn=new lt,Bn=(()=>{class t extends Ne{constructor(){super(...arguments),this.defaultOptions=jn}static setup(e){return[t,e]}authenticate(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}register(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}requestPassword(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}resetPassword(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}logout(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}refreshToken(e){return b(this.createDummyResult(e)).pipe(ie(this.getOption("delay")))}createDummyResult(e){if(this.getOption("alwaysFail"))return new v(!1,this.createFailResponse(e),null,["Something went wrong."]);try{let n=this.createToken("test token",!0);return new v(!0,this.createSuccessResponse(e),"/",[],["Successfully logged in."],n)}catch(n){return new v(!1,this.createFailResponse(e),null,[n.message])}}}return t.\u0275fac=(()=>{let r;return function(n){return(r||(r=xt(t)))(n||t)}})(),t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();var pe=function(t){return t.CODE="code",t.TOKEN="token",t}(pe||{}),Ue=function(t){return t.AUTHORIZATION_CODE="authorization_code",t.PASSWORD="password",t.REFRESH_TOKEN="refresh_token",t}(Ue||{}),He=function(t){return t.NONE="none",t.BASIC="basic",t.REQUEST_BODY="request-body",t}(He||{}),ct=class extends ke{constructor(){super(...arguments),this.baseEndpoint="",this.clientId="",this.clientSecret="",this.clientAuthMethod=He.NONE,this.redirect={success:"/",failure:null},this.defaultErrors=["Something went wrong, please try again."],this.defaultMessages=["You have been successfully authenticated."],this.authorize={endpoint:"authorize",responseType:pe.CODE,requireValidToken:!0},this.token={endpoint:"token",grantType:Ue.AUTHORIZATION_CODE,requireValidToken:!0,class:Fn},this.refresh={endpoint:"token",grantType:Ue.REFRESH_TOKEN,requireValidToken:!0}}},Wn=new ct;var zn=(()=>{class t extends Ne{constructor(e,n,o){super(),this.http=e,this.route=n,this.window=o,this.redirectResultHandlers={[pe.CODE]:()=>b(this.route.snapshot.queryParams).pipe(T(i=>i.code?this.requestToken(i.code):b(new v(!1,i,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),[pe.TOKEN]:()=>{let c=this.getOption("authorize.requireValidToken");return b(this.route.snapshot.fragment).pipe(f(p=>this.parseHashAsQueryParams(p)),f(p=>p.error?new v(!1,p,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new v(!0,p,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(p,c))),S(p=>{let he=[];return p instanceof te?he.push(p.message):he.push("Something went wrong."),b(new v(!1,p,this.getOption("redirect.failure"),he))}))}},this.redirectResults={[pe.CODE]:()=>b(this.route.snapshot.queryParams).pipe(f(i=>!!(i&&(i.code||i.error)))),[pe.TOKEN]:()=>b(this.route.snapshot.fragment).pipe(f(i=>this.parseHashAsQueryParams(i)),f(i=>!!(i&&(i.access_token||i.error))))},this.defaultOptions=Wn}static setup(e){return[t,e]}get responseType(){return this.getOption("authorize.responseType")}get clientAuthMethod(){return this.getOption("clientAuthMethod")}authenticate(e){return this.getOption("token.grantType")===Ue.PASSWORD?this.passwordToken(e.email,e.password):this.isRedirectResult().pipe(T(n=>n?this.getAuthorizationResult():(this.authorizeRedirect(),b(new v(!0)))))}getAuthorizationResult(){let e=this.redirectResultHandlers[this.responseType];if(e)return e.call(this);throw new Error(`'${this.responseType}' responseType is not supported,
                      only 'token' and 'code' are supported now`)}refreshToken(e){let n="refresh",o=this.getActionEndpoint(n),i=this.getOption(`${n}.requireValidToken`);return this.http.post(o,this.buildRefreshRequestData(e),{headers:this.getHeaders()}).pipe(f(c=>new v(!0,c,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createRefreshedToken(c,e,i))),S(c=>this.handleResponseError(c)))}passwordToken(e,n){let o="token",i=this.getActionEndpoint(o),c=this.getOption(`${o}.requireValidToken`);return this.http.post(i,this.buildPasswordRequestData(e,n),{headers:this.getHeaders()}).pipe(f(p=>new v(!0,p,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(p,c))),S(p=>this.handleResponseError(p)))}authorizeRedirect(){this.window.location.href=this.buildRedirectUrl()}isRedirectResult(){return this.redirectResults[this.responseType].call(this)}requestToken(e){let n="token",o=this.getActionEndpoint(n),i=this.getOption(`${n}.requireValidToken`);return this.http.post(o,this.buildCodeRequestData(e),{headers:this.getHeaders()}).pipe(f(c=>new v(!0,c,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(c,i))),S(c=>this.handleResponseError(c)))}buildCodeRequestData(e){let n={grant_type:this.getOption("token.grantType"),code:e,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(n)))}buildRefreshRequestData(e){let n={grant_type:this.getOption("refresh.grantType"),refresh_token:e.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(n)))}buildPasswordRequestData(e,n){let o={grant_type:this.getOption("token.grantType"),username:e,password:n,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(o)))}buildAuthHeader(){if(this.clientAuthMethod===He.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new Re({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}getHeaders(){let e=super.getHeaders();e=e.append("Content-Type","application/x-www-form-urlencoded");let n=this.buildAuthHeader();if(n===void 0)return e;for(let o of n.keys())for(let i of n.getAll(o))e=e.append(o,i);return e}cleanParams(e){return Object.entries(e).forEach(([n,o])=>!o&&delete e[n]),e}addCredentialsToParams(e){if(this.clientAuthMethod===He.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return wt(Qe({},e),{client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")});throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return e}handleResponseError(e){let n=[];return e instanceof tt?e.error.error_description?n.push(e.error.error_description):n=this.getOption("defaultErrors"):e instanceof te?n.push(e.message):n.push("Something went wrong."),b(new v(!1,e,this.getOption("redirect.failure"),n,[]))}buildRedirectUrl(){let e=Qe({response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state")},this.getOption("authorize.params")),n=this.getActionEndpoint("authorize"),o=this.urlEncodeParameters(this.cleanParams(e));return`${n}?${o}`}parseHashAsQueryParams(e){return e?e.split("&").reduce((n,o)=>{let i=o.split("=");return n[i[0]]=decodeURIComponent(i[1]),n},{}):{}}urlEncodeParameters(e){return Object.keys(e).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`).join("&")}createRefreshedToken(e,n,o){let i=this.createToken(e,o);return!i.getRefreshToken()&&n.getRefreshToken()&&i.setRefreshToken(n.getRefreshToken()),i}register(e){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}requestPassword(e){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}resetPassword(e={}){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}logout(){return b(new v(!0))}}return t.\u0275fac=function(e){return new(e||t)(_(nt),_(rt),_(Dt))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();var ut=class extends ke{constructor(){super(...arguments),this.baseEndpoint="/api/auth/",this.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},this.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},this.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},this.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},this.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},this.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},this.token={class:xe,key:"data.token",getter:(r,e,n)=>We(e.body,n.token.key)},this.errors={key:"data.errors",getter:(r,e,n)=>We(e.error,n.errors.key,n[r].defaultErrors)},this.messages={key:"data.messages",getter:(r,e,n)=>We(e.body,n.messages.key,n[r].defaultMessages)}}},Un=new ut;var dt=(()=>{class t extends Ne{constructor(e,n){super(),this.http=e,this.route=n,this.defaultOptions=Un}static setup(e){return[t,e]}authenticate(e){let n="login",o=this.getOption(`${n}.method`),i=this.getActionEndpoint(n),c=this.getOption(`${n}.requireValidToken`);return this.http.request(o,i,{body:e,observe:"response",headers:this.getHeaders()}).pipe(f(p=>{if(this.getOption(`${n}.alwaysFail`))throw this.createFailResponse(e);return p}),f(p=>new v(!0,p,this.getOption(`${n}.redirect.success`),[],this.getOption("messages.getter")(n,p,this.options),this.createToken(this.getOption("token.getter")(n,p,this.options),c))),S(p=>this.handleResponseError(p,n)))}register(e){let n="register",o=this.getOption(`${n}.method`),i=this.getActionEndpoint(n),c=this.getOption(`${n}.requireValidToken`);return this.http.request(o,i,{body:e,observe:"response",headers:this.getHeaders()}).pipe(f(p=>{if(this.getOption(`${n}.alwaysFail`))throw this.createFailResponse(e);return p}),f(p=>new v(!0,p,this.getOption(`${n}.redirect.success`),[],this.getOption("messages.getter")(n,p,this.options),this.createToken(this.getOption("token.getter")("login",p,this.options),c))),S(p=>this.handleResponseError(p,n)))}requestPassword(e){let n="requestPass",o=this.getOption(`${n}.method`),i=this.getActionEndpoint(n);return this.http.request(o,i,{body:e,observe:"response",headers:this.getHeaders()}).pipe(f(c=>{if(this.getOption(`${n}.alwaysFail`))throw this.createFailResponse();return c}),f(c=>new v(!0,c,this.getOption(`${n}.redirect.success`),[],this.getOption("messages.getter")(n,c,this.options))),S(c=>this.handleResponseError(c,n)))}resetPassword(e={}){let n="resetPass",o=this.getOption(`${n}.method`),i=this.getActionEndpoint(n),c=this.getOption(`${n}.resetPasswordTokenKey`);return e[c]=this.route.snapshot.queryParams[c],this.http.request(o,i,{body:e,observe:"response",headers:this.getHeaders()}).pipe(f(p=>{if(this.getOption(`${n}.alwaysFail`))throw this.createFailResponse();return p}),f(p=>new v(!0,p,this.getOption(`${n}.redirect.success`),[],this.getOption("messages.getter")(n,p,this.options))),S(p=>this.handleResponseError(p,n)))}logout(){let e="logout",n=this.getOption(`${e}.method`),o=this.getActionEndpoint(e);return b({}).pipe(T(i=>o?this.http.request(n,o,{observe:"response",headers:this.getHeaders()}):b(i)),f(i=>{if(this.getOption(`${e}.alwaysFail`))throw this.createFailResponse();return i}),f(i=>new v(!0,i,this.getOption(`${e}.redirect.success`),[],this.getOption("messages.getter")(e,i,this.options))),S(i=>this.handleResponseError(i,e)))}refreshToken(e){let n="refreshToken",o=this.getOption(`${n}.method`),i=this.getActionEndpoint(n),c=this.getOption(`${n}.requireValidToken`);return this.http.request(o,i,{body:e,observe:"response",headers:this.getHeaders()}).pipe(f(p=>{if(this.getOption(`${n}.alwaysFail`))throw this.createFailResponse(e);return p}),f(p=>new v(!0,p,this.getOption(`${n}.redirect.success`),[],this.getOption("messages.getter")(n,p,this.options),this.createToken(this.getOption("token.getter")(n,p,this.options),c))),S(p=>this.handleResponseError(p,n)))}handleResponseError(e,n){let o=[];return e instanceof tt?o=this.getOption("errors.getter")(n,e,this.options):e instanceof te?o.push(e.message):o.push("Something went wrong."),b(new v(!1,e,this.getOption(`${n}.redirect.failure`),o))}}return t.\u0275fac=function(e){return new(e||t)(_(nt),_(rt))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();var an=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=k({type:t,selectors:[["nb-auth-block"]],ngContentSelectors:Tn,decls:1,vars:0,template:function(e,n){e&1&&(Et(),Tt(0))},styles:[`




[_nghost-%COMP%]{display:block;width:100%;max-width:35rem}[_nghost-%COMP%]     form{width:100%}[_nghost-%COMP%]     .label{display:block;margin-bottom:.5rem}[_nghost-%COMP%]     .forgot-password{text-decoration:none;margin-bottom:.5rem}[_nghost-%COMP%]     .caption{margin-top:.5rem}[_nghost-%COMP%]     .alert{text-align:center}[_nghost-%COMP%]     .title{margin-top:0;margin-bottom:.75rem;text-align:center}[_nghost-%COMP%]     .sub-title{margin-bottom:2rem;text-align:center}[_nghost-%COMP%]     .form-control-group{margin-bottom:2rem}[_nghost-%COMP%]     .form-control-group.accept-group{display:flex;justify-content:space-between;margin:2rem 0}[_nghost-%COMP%]     .label-with-link{display:flex;justify-content:space-between}[_nghost-%COMP%]     .links{text-align:center;margin-top:1.75rem}[_nghost-%COMP%]     .links .socials{margin-top:1.5rem}[_nghost-%COMP%]     .links .socials a{margin:0 1rem;text-decoration:none;vertical-align:middle}[_nghost-%COMP%]     .links .socials a.with-icon{font-size:2rem}[_nghost-%COMP%]     .another-action{margin-top:2rem;text-align:center}[_nghost-%COMP%]     .sign-in-or-up{margin-top:2rem;display:flex;justify-content:space-between}[_nghost-%COMP%]     nb-alert .alert-title, [_nghost-%COMP%]     nb-alert .alert-message{margin:0 0 .5rem}[_nghost-%COMP%]     nb-alert .alert-message-list{list-style-type:none;padding:0;margin:0}`]}),t})();function Hn(t,r){let e=[];return t.strategies.forEach(([n,o])=>{let i=r.get(n);i.setOptions(o),e.push(i)}),e}function $n(t){let r=[];return t.forEach(e=>{r.push(e.getOption("token.class"))}),r}function Gn(t){return me(In,t)}function Jn(t){return!0}var ln=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:Yt,useValue:e},{provide:I,useFactory:Gn,deps:[Yt]},{provide:st,useFactory:Hn,deps:[I,Ie]},{provide:Qt,useFactory:$n,deps:[st]},{provide:rn,useValue:xe},{provide:Rn,useValue:"Authorization"},{provide:$e,useValue:Jn},{provide:Pe,useClass:Ge},on,M,sn,Bn,dt,zn]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=A({type:t}),t.\u0275inj=L({imports:[[H,qe,le,ue,je,de,ce,Ce,Le,De]]}),t})();var cn=(()=>{class t{constructor(e,n){this.injector=e,this.filter=n}intercept(e,n){return this.filter(e)?n.handle(e):this.authService.isAuthenticatedOrRefresh().pipe(T(o=>o?this.authService.getToken().pipe(T(i=>{let c=`Bearer ${i.getValue()}`;return e=e.clone({setHeaders:{Authorization:c}}),n.handle(e)})):n.handle(e)))}get authService(){return this.injector.get(M)}}return t.\u0275fac=function(e){return new(e||t)(_(Ie),_($e))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})();var pn=new V("Nebular Security Options");var pt=t=>Object.assign({},t),un=t=>Object.assign([],t),dn=t=>{let r=t.parent;return delete t.parent,r},mn=(()=>{class t{constructor(e={}){this.settings=e,this.state={},e.accessControl&&this.setAccessControl(e.accessControl)}setAccessControl(e){for(let[n,o]of Object.entries(e)){let i=pt(o),c=dn(i);this.register(n,c,i)}}register(e,n=null,o={}){this.validateRole(e),this.state[e]={parent:n};for(let[i,c]of Object.entries(o)){let p=typeof c=="string"?[c]:c;this.allow(e,i,un(p))}}allow(e,n,o){this.validateRole(e),this.getRole(e)||this.register(e,null,{}),o=typeof o=="string"?[o]:o;let i=un(this.getRoleResources(e,n));i=i.concat(o),this.state[e][n]=i.filter((c,p)=>i.indexOf(c)===p)}can(e,n,o){return this.validateResource(o),this.getRoleParent(e)&&this.can(this.getRoleParent(e),n,o)||this.exactCan(e,n,o)}getRole(e){return this.state[e]}validateRole(e){if(!e)throw new Error("NbAclService: role name cannot be empty")}validateResource(e){if(!e||[t.ANY_RESOURCE].includes(e))throw new Error("NbAclService: cannot use empty or bulk '*' resource placeholder with 'can' method")}exactCan(e,n,o){let i=this.getRoleResources(e,n);return i.includes(o)||i.includes(t.ANY_RESOURCE)}getRoleResources(e,n){return this.getRoleAbilities(e)[n]||[]}getRoleAbilities(e){let n=pt(this.state[e]||{});return dn(pt(this.state[e]||{})),n}getRoleParent(e){return this.state[e]?this.state[e].parent:null}}return t.ANY_RESOURCE="*",t.\u0275fac=function(e){return new(e||t)(_(pn,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),W=class{};var gn=(()=>{class t{constructor(e,n){this.roleProvider=e,this.acl=n}isGranted(e,n){return this.roleProvider.getRole().pipe(f(o=>Array.isArray(o)?o:[o]),f(o=>o.some(i=>this.acl.can(i,e,n))))}}return t.\u0275fac=function(e){return new(e||t)(_(W),_(mn))},t.\u0275prov=y({token:t,factory:t.\u0275fac}),t})(),Mr=(()=>{class t{constructor(e,n,o){this.templateRef=e,this.viewContainer=n,this.accessChecker=o,this.destroy$=new Ze,this.hasView=!1}set nbIsGranted([e,n]){this.accessChecker.isGranted(e,n).pipe(Xe(this.destroy$)).subscribe(o=>{o&&!this.hasView?(this.viewContainer.createEmbeddedView(this.templateRef),this.hasView=!0):!o&&this.hasView&&(this.viewContainer.clear(),this.hasView=!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(e){return new(e||t)(m(St),m(Ot),m(gn))},t.\u0275dir=kt({type:t,selectors:[["","nbIsGranted",""]],inputs:{nbIsGranted:"nbIsGranted"}}),t})(),hn=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:pn,useValue:e},mn,gn]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=A({type:t}),t.\u0275inj=L({imports:[[H]]}),t})();var fn=(()=>{let r=class r{constructor(n){this.router=n}intercept(n,o){return o.handle(n).pipe(S(i=>(i.status,Ct(i))))}};r.\u0275fac=function(o){return new(o||r)(_(P))},r.\u0275prov=y({token:r,factory:r.\u0275fac});let t=r;return t})();var _n=(()=>{let r=class r extends W{constructor(n){super(),this.authService=n}getLowerCaseRoles(n){return Array.isArray(n)?n=n.map(o=>o.toLowerCase()):n=n.toLowerCase(),n}getRole(){return this.authService.getToken().pipe(f(n=>{if(!n||!n.getAccessTokenPayload){console.info("SUT - No Token in Development Mode");return}let o=n.getAccessTokenPayload();return n.isValid()&&o&&o.role?this.getLowerCaseRoles(o.role):"guest"}))}};r.\u0275fac=function(o){return new(o||r)(_(M))},r.\u0275prov=y({token:r,factory:r.\u0275fac});let t=r;return t})();var mt={ADMIN:1,USER:2,GUEST:3};var bn=(()=>{let r=class r{constructor(n,o){this.roleProvider=n,this.router=o}canActivate(){return this.roleProvider.getRole().pipe(f(n=>{let i=(n instanceof Array?n:[n]).some(c=>c&&c.toString()===mt.ADMIN.toString());return i||!1}))}manual(){return this.roleProvider.getRole().pipe(f(n=>{let i=(n instanceof Array?n:[n]).some(c=>c&&c.toString()===mt.ADMIN.toString());return i||!1}))}};r.\u0275fac=function(o){return new(o||r)(_(W),_(P))},r.\u0275prov=y({token:r,factory:r.\u0275fac});let t=r;return t})();var yn=(()=>{let r=class r{constructor(n,o){this.authService=n,this.router=o}canActivate(n,o){return this.authService.isAuthenticated().pipe(Pt(i=>{}))}};r.\u0275fac=function(o){return new(o||r)(_(M),_(P))},r.\u0275prov=y({token:r,factory:r.\u0275fac});let t=r;return t})();var Je=function(...t){if(arguments.length<1||typeof arguments[0]!="object")return!1;if(arguments.length<2)return arguments[0];let r=arguments[0],e=Array.prototype.slice.call(arguments,1),n,o;return e.forEach(function(i){typeof i!="object"||Array.isArray(i)||Object.keys(i).forEach(function(c){if(o=r[c],n=i[c],n!==r)if(typeof n!="object"||n===null){r[c]=n;return}else if(Array.isArray(n)){r[c]=vn(n);return}else if(wn(n)){r[c]=Cn(n);return}else if(typeof o!="object"||o===null||Array.isArray(o)){r[c]=Je({},n);return}else{r[c]=Je(o,n);return}})}),r};function wn(t){return t instanceof Date||t instanceof RegExp}function Cn(t){if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("cloneSpecificValue: Unexpected situation")}function vn(t){let r=[];return t.forEach(function(e,n){typeof e=="object"&&e!==null?Array.isArray(e)?r[n]=vn(e):wn(e)?r[n]=Cn(e):r[n]=Je({},e):r[n]=e}),r}function q(t={},r,e){let n=r.split("."),o=Je({},t||{});return n.forEach(i=>{o&&typeof o[i]<"u"?o=o[i]:o=void 0}),typeof o>"u"?e:o}var ge="^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$";function Yn(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),se(" Min ",e.label," length is ",e.minLength," symbols ")}}function Qn(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),se(" Max ",e.label," length is ",e.maxLength," symbols ")}}function Zn(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),we(" Incorrect ",e.label," ")}}function Xn(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),we(" ",e.label," is required")}}function ei(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),se("Min value of ",e.label," is ",e.min,"")}}function ti(t,r){if(t&1&&(l(0,"span",2),d(1),s()),t&2){let e=g();a(),se("Max value of ",e.label," is ",e.max,"")}}var z=(()=>{let r=class r{constructor(){this.label=""}};r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=k({type:r,selectors:[["ngx-validation-message"]],inputs:{label:"label",showRequired:"showRequired",min:"min",showMin:"showMin",max:"max",showMax:"showMax",minLength:"minLength",showMinLength:"showMinLength",maxLength:"maxLength",showMaxLength:"showMaxLength",showPattern:"showPattern"},features:[It([{provide:Vt,useExisting:Nt(()=>r),multi:!0}])],decls:7,vars:6,consts:[[1,"warning"],["class","caption status-danger",4,"ngIf"],[1,"caption","status-danger"]],template:function(o,i){o&1&&(l(0,"div",0),h(1,Yn,2,2,"span",1)(2,Qn,2,2,"span",1)(3,Zn,2,1,"span",1)(4,Xn,2,1,"span",1)(5,ei,2,2,"span",1)(6,ti,2,2,"span",1),s()),o&2&&(a(),u("ngIf",i.showMinLength),a(),u("ngIf",i.showMaxLength),a(),u("ngIf",i.showPattern),a(),u("ngIf",i.showRequired),a(),u("ngIf",i.showMin),a(),u("ngIf",i.showMax))},dependencies:[D],styles:[`[_nghost-%COMP%]   .warning[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:0;color:var(--color-danger-default)}











`]});let t=r;return t})();function ni(t,r){if(t&1&&(l(0,"li",17),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function ii(t,r){if(t&1&&(l(0,"nb-alert",13)(1,"p",14)(2,"b"),d(3,"Oh snap!"),s()(),l(4,"ul",15),h(5,ni,2,1,"li",16),s()()),t&2){let e=g();a(5),u("ngForOf",e.errors)}}function ri(t,r){if(t&1&&(l(0,"li",17),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function oi(t,r){if(t&1&&(l(0,"nb-alert",18)(1,"p",14)(2,"b"),d(3,"Hooray!"),s()(),l(4,"ul",15),h(5,ri,2,1,"li",16),s()()),t&2){let e=g();a(5),u("ngForOf",e.messages)}}var ht=(()=>{let r=class r{constructor(n,o={},i,c,p){this.service=n,this.options=o,this.cd=i,this.fb=c,this.router=p,this.redirectDelay=this.getConfigValue("forms.requestPassword.redirectDelay"),this.showMessages=this.getConfigValue("forms.requestPassword.showMessages"),this.strategy=this.getConfigValue("forms.requestPassword.strategy"),this.isEmailRequired=this.getConfigValue("forms.validation.email.required"),this.submitted=!1,this.errors=[],this.messages=[],this.user={}}get email(){return this.requestPasswordForm.get("email")}ngOnInit(){let n=[C.pattern(ge)];this.isEmailRequired&&n.push(C.required),this.requestPasswordForm=this.fb.group({email:this.fb.control("",[...n])})}requestPass(){this.user=this.requestPasswordForm.value,this.errors=this.messages=[],this.submitted=!0,this.service.requestPassword(this.strategy,this.user).subscribe(n=>{this.submitted=!1,n.isSuccess()?this.messages=n.getMessages():this.errors=n.getErrors();let o=n.getRedirect();o&&setTimeout(()=>this.router.navigateByUrl(o),this.redirectDelay),this.cd.detectChanges()})}getConfigValue(n){return q(this.options,n,null)}};r.\u0275fac=function(o){return new(o||r)(m(M),m(I),m(F),m(Q),m(P))},r.\u0275cmp=k({type:r,selectors:[["ngx-request-password-page"]],decls:21,vars:10,consts:[["id","title",1,"title"],[1,"sub-title"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","title",3,"formGroup"],[1,"form-control-group"],["for","input-email"],["nbInput","","autofocus","","fullWidth","","fieldSize","large","id","input-email","formControlName","email","placeholder","Email address",3,"status"],["label","Email address",3,"showPattern","showRequired"],["nbButton","","fullWidth","","status","primary","size","large",3,"click","disabled"],["aria-label","Sign in or sign up",1,"sign-in-or-up"],["routerLink","../login",1,"text-link"],["routerLink","../register",1,"text-link"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"]],template:function(o,i){o&1&&(l(0,"h1",0),d(1,"Forgot Password"),s(),l(2,"p",1),d(3,"Enter your email address and we\u2019ll send a link to reset your password"),s(),h(4,ii,6,1,"nb-alert",2)(5,oi,6,1,"nb-alert",3),l(6,"div",4)(7,"div",5)(8,"label",6),d(9,"Email address:"),s(),w(10,"input",7)(11,"ngx-validation-message",8),s(),l(12,"button",9),R("click",function(){return i.requestPass()}),d(13," Request password "),s()(),l(14,"section",10)(15,"p")(16,"a",11),d(17,"Back to Log In"),s()(),l(18,"p")(19,"a",12),d(20,"Register"),s()()()),o&2&&(a(4),u("ngIf",(i.showMessages==null?null:i.showMessages.error)&&(i.errors==null?null:i.errors.length)&&!i.submitted),a(),u("ngIf",(i.showMessages==null?null:i.showMessages.success)&&(i.messages==null?null:i.messages.length)&&!i.submitted),a(),u("formGroup",i.requestPasswordForm),a(4),u("status",i.email.dirty?i.email.invalid?"danger":"success":""),O("aria-invalid",i.email.invalid&&i.email.touched?!0:null),a(),u("showPattern",(i.email==null?null:i.email.hasError("pattern"))&&i.email.touched)("showRequired",(i.email==null||i.email.errors==null?null:i.email.errors.required)&&i.email.touched),a(),E("btn-pulse",i.submitted),u("disabled",i.submitted||!i.requestPasswordForm.valid))},dependencies:[j,$,G,J,K,Y,U,D,z,X,ee,Z],styles:[`[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:3rem}





`],changeDetection:0});let t=r;return t})();function si(t,r){if(t&1&&(l(0,"li",21),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function ai(t,r){if(t&1&&(l(0,"nb-alert",17)(1,"p",18)(2,"b"),d(3,"Oh snap!"),s()(),l(4,"ul",19),h(5,si,2,1,"li",20),s()()),t&2){let e=g();a(5),u("ngForOf",e.errors)}}function li(t,r){if(t&1&&(l(0,"li",21),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function ci(t,r){if(t&1&&(l(0,"nb-alert",22)(1,"p",18)(2,"b"),d(3,"Hooray!"),s()(),l(4,"ul",19),h(5,li,2,1,"li",20),s()()),t&2){let e=g();a(5),u("ngForOf",e.messages)}}function ui(t,r){t&1&&(l(0,"p",23),d(1," Password and confirm password does not match! "),s())}var ft=(()=>{let r=class r{constructor(n,o={},i,c,p){this.service=n,this.options=o,this.cd=i,this.fb=c,this.router=p,this.minLength=this.getConfigValue("forms.validation.password.minLength"),this.maxLength=this.getConfigValue("forms.validation.password.maxLength"),this.redirectDelay=this.getConfigValue("forms.resetPassword.redirectDelay"),this.showMessages=this.getConfigValue("forms.resetPassword.showMessages"),this.strategy=this.getConfigValue("forms.resetPassword.strategy"),this.isPasswordRequired=this.getConfigValue("forms.validation.password.required"),this.submitted=!1,this.errors=[],this.messages=[],this.user={}}ngOnInit(){let n=[C.minLength(this.minLength),C.maxLength(this.maxLength)];this.isPasswordRequired&&n.push(C.required),this.resetPasswordForm=this.fb.group({password:this.fb.control("",[...n]),confirmPassword:this.fb.control("",[...n])})}get password(){return this.resetPasswordForm.get("password")}get confirmPassword(){return this.resetPasswordForm.get("confirmPassword")}resetPass(){this.errors=this.messages=[],this.submitted=!0,this.user=this.resetPasswordForm.value,this.service.resetPassword(this.strategy,this.user).subscribe(n=>{this.submitted=!1,n.isSuccess()?this.messages=n.getMessages():this.errors=n.getErrors();let o=n.getRedirect();o&&setTimeout(()=>this.router.navigateByUrl(o),this.redirectDelay),this.cd.detectChanges()})}getConfigValue(n){return q(this.options,n,null)}};r.\u0275fac=function(o){return new(o||r)(m(M),m(I),m(F),m(Q),m(P))},r.\u0275cmp=k({type:r,selectors:[["ngx-reset-password-page"]],decls:27,vars:19,consts:[["id","title",1,"title"],[1,"sub-title"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","title",3,"formGroup"],[1,"form-control-group"],["for","input-password"],["nbInput","","autofocus","","fullWidth","","id","input-password","formControlName","password","type","password","placeholder","Password",1,"first",3,"status"],["label","Password",3,"showMinLength","showMaxLength","showRequired","minLength","maxLength"],["for","input-re-password"],["nbInput","","fullWidth","","id","input-re-password","formControlName","confirmPassword","type","password","placeholder","Password",3,"status"],["label","Confirm Password",3,"showMinLength","showMaxLength","showRequired","minLength","maxLength"],["class","error-message caption status-danger",4,"ngIf"],["nbButton","","status","success","fullWidth","",3,"click","disabled"],["aria-label","Sign in or sign up",1,"sign-in-or-up"],["routerLink","../login",1,"text-link"],["routerLink","../register",1,"text-link"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"],[1,"error-message","caption","status-danger"]],template:function(o,i){o&1&&(l(0,"h1",0),d(1,"Change password"),s(),l(2,"p",1),d(3,"Please set a new password"),s(),h(4,ai,6,1,"nb-alert",2)(5,ci,6,1,"nb-alert",3),l(6,"div",4)(7,"div",5)(8,"label",6),d(9,"Password:"),s(),w(10,"input",7)(11,"ngx-validation-message",8),s(),l(12,"div",5)(13,"label",9),d(14,"Confirm Password:"),s(),w(15,"input",10)(16,"ngx-validation-message",11),h(17,ui,2,0,"p",12),s(),l(18,"button",13),R("click",function(){return i.resetPass()}),d(19," Change password "),s()(),l(20,"section",14)(21,"p")(22,"a",15),d(23,"Back to Log In"),s()(),l(24,"p")(25,"a",16),d(26,"Register"),s()()()),o&2&&(a(4),u("ngIf",(i.showMessages==null?null:i.showMessages.error)&&(i.errors==null?null:i.errors.length)&&!i.submitted),a(),u("ngIf",(i.showMessages==null?null:i.showMessages.success)&&(i.messages==null?null:i.messages.length)&&!i.submitted),a(),u("formGroup",i.resetPasswordForm),a(4),u("status",i.password.dirty?i.password.invalid?"danger":"success":""),a(),u("showMinLength",(i.password==null?null:i.password.hasError("minlength"))&&i.password.touched)("showMaxLength",(i.password==null?null:i.password.hasError("maxlength"))&&i.password.touched)("showRequired",i.password.errors.required&&i.password.touched)("minLength",i.minLength)("maxLength",i.maxLength),a(4),u("status",i.confirmPassword.dirty?i.confirmPassword.invalid||i.password.value!=i.confirmPassword.value?"danger":"success":""),a(),u("showMinLength",(i.confirmPassword==null?null:i.confirmPassword.hasError("minlength"))&&i.confirmPassword.touched)("showMaxLength",(i.confirmPassword==null?null:i.confirmPassword.hasError("maxlength"))&&i.confirmPassword.touched)("showRequired",(i.confirmPassword==null||i.confirmPassword.errors==null?null:i.confirmPassword.errors.required)&&i.confirmPassword.touched)("minLength",i.minLength)("maxLength",i.maxLength),a(),u("ngIf",i.password.value!=i.confirmPassword.value&&i.confirmPassword.touched),a(),E("btn-pulse",i.submitted),u("disabled",i.submitted||!i.resetPasswordForm.valid||i.password.value!=i.confirmPassword.value))},dependencies:[j,$,G,J,K,Y,U,D,z,X,ee,Z],styles:[`[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:3rem}





`],changeDetection:0});let t=r;return t})();function di(t,r){if(t&1&&(l(0,"li",28),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function pi(t,r){if(t&1&&(l(0,"nb-alert",24)(1,"p",25)(2,"b"),d(3,"Oh snap!"),s()(),l(4,"ul",26),h(5,di,2,1,"li",27),s()()),t&2){let e=g();a(5),u("ngForOf",e.errors)}}function mi(t,r){if(t&1&&(l(0,"li",28),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function gi(t,r){if(t&1&&(l(0,"nb-alert",29)(1,"p",25)(2,"b"),d(3,"Hooray!"),s()(),l(4,"ul",26),h(5,mi,2,1,"li",27),s()()),t&2){let e=g();a(5),u("ngForOf",e.messages)}}function hi(t,r){t&1&&(l(0,"p",30),d(1," Password and confirm password does not match! "),s())}function fi(t,r){if(t&1&&(l(0,"div",31)(1,"nb-checkbox",32),d(2," Agree to "),l(3,"a",33)(4,"strong"),d(5,"Terms & Conditions"),s()()()()),t&2){let e=g();a(),u("required",e.getConfigValue("forms.register.terms"))}}function _i(t,r){if(t&1&&w(0,"nb-icon",41),t&2){let e=g(2).$implicit;u("icon",e.icon)}}function bi(t,r){if(t&1&&d(0),t&2){let e=g(2).$implicit;x(e.title)}}function yi(t,r){if(t&1&&(l(0,"a",39),h(1,_i,1,1,"nb-icon",40)(2,bi,1,1,"ng-template",null,0,oe),s()),t&2){let e=re(3),n=g().$implicit;E("with-icon",n.icon),u("routerLink",n.link),O("target",n.target)("class",n.icon),a(),u("ngIf",n.icon)("ngIfElse",e)}}function wi(t,r){if(t&1&&w(0,"nb-icon",41),t&2){let e=g(2).$implicit;u("icon",e.icon)}}function Ci(t,r){if(t&1&&d(0),t&2){let e=g(2).$implicit;x(e.title)}}function vi(t,r){if(t&1&&(l(0,"a"),h(1,wi,1,1,"nb-icon",40)(2,Ci,1,1,"ng-template",null,0,oe),s()),t&2){let e=re(3),n=g().$implicit;E("with-icon",n.icon),O("href",n.url,_e)("target",n.target)("class",n.icon),a(),u("ngIf",n.icon)("ngIfElse",e)}}function Mi(t,r){if(t&1&&(be(0),h(1,yi,4,7,"a",37)(2,vi,4,7,"a",38),ye()),t&2){let e=r.$implicit;a(),u("ngIf",e.link),a(),u("ngIf",e.url)}}function Pi(t,r){if(t&1&&(l(0,"section",34),d(1," or enter with: "),l(2,"div",35),h(3,Mi,3,2,"ng-container",36),s()()),t&2){let e=g();a(3),u("ngForOf",e.socialLinks)}}var _t=(()=>{let r=class r{constructor(n,o={},i,c,p){this.service=n,this.options=o,this.cd=i,this.fb=c,this.router=p,this.minLoginLength=this.getConfigValue("forms.validation.fullName.minLength"),this.maxLoginLength=this.getConfigValue("forms.validation.fullName.maxLength"),this.minLength=this.getConfigValue("forms.validation.password.minLength"),this.maxLength=this.getConfigValue("forms.validation.password.maxLength"),this.isFullNameRequired=this.getConfigValue("forms.validation.fullName.required"),this.isEmailRequired=this.getConfigValue("forms.validation.email.required"),this.isPasswordRequired=this.getConfigValue("forms.validation.password.required"),this.redirectDelay=this.getConfigValue("forms.register.redirectDelay"),this.showMessages=this.getConfigValue("forms.register.showMessages"),this.strategy=this.getConfigValue("forms.register.strategy"),this.socialLinks=this.getConfigValue("forms.login.socialLinks"),this.submitted=!1,this.errors=[],this.messages=[],this.user={}}get login(){return this.registerForm.get("fullName")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get confirmPassword(){return this.registerForm.get("confirmPassword")}get terms(){return this.registerForm.get("terms")}ngOnInit(){let n=[C.minLength(this.minLoginLength),C.maxLength(this.maxLoginLength)];this.isFullNameRequired&&n.push(C.required);let o=[C.pattern(ge)];this.isEmailRequired&&o.push(C.required);let i=[C.minLength(this.minLength),C.maxLength(this.maxLength)];this.isPasswordRequired&&i.push(C.required),this.registerForm=this.fb.group({fullName:this.fb.control("",[...n]),email:this.fb.control("",[...o]),password:this.fb.control("",[...i]),confirmPassword:this.fb.control("",[...i]),terms:this.fb.control("")})}register(){this.user=this.registerForm.value,this.errors=this.messages=[],this.submitted=!0,this.service.register(this.strategy,this.user).subscribe(n=>{this.submitted=!1,n.isSuccess()?this.messages=n.getMessages():this.errors=n.getErrors();let o=n.getRedirect();o&&setTimeout(()=>this.router.navigateByUrl(o),this.redirectDelay),this.cd.detectChanges()})}getConfigValue(n){return q(this.options,n,null)}};r.\u0275fac=function(o){return new(o||r)(m(M),m(I),m(F),m(Q),m(P))},r.\u0275cmp=k({type:r,selectors:[["ngx-register"]],decls:34,vars:32,consts:[["title",""],["id","title",1,"title"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","title",3,"formGroup"],[1,"form-control-group"],["for","input-name"],["nbInput","","autofocus","","fullWidth","","fieldSize","large","id","input-name","formControlName","fullName","placeholder","Login",3,"status"],["label","Login",3,"showMinLength","showMaxLength","minLength","maxLength","showRequired"],["for","input-email"],["nbInput","","fullWidth","","fieldSize","large","id","input-email","formControlName","email","placeholder","Email address",3,"status"],["label","Email address",3,"showPattern","showRequired"],["for","input-password"],["nbInput","","fullWidth","","fieldSize","large","id","input-password","formControlName","password","type","password","placeholder","Password",3,"status"],["label","Password",3,"showMinLength","showMaxLength","showRequired","minLength","maxLength"],["for","input-re-password"],["nbInput","","fullWidth","","fieldSize","large","id","input-re-password","formControlName","confirmPassword","type","password","placeholder","Password",3,"status"],["label","Confirm Password",3,"showMinLength","showMaxLength","showRequired","minLength","maxLength"],["class","caption status-danger",4,"ngIf"],["class","form-control-group accept-group",4,"ngIf"],["nbButton","","fullWidth","","status","primary","size","large",3,"click","disabled"],["class","links","aria-label","Social sign in",4,"ngIf"],["aria-label","Sign in",1,"another-action"],["routerLink","../login",1,"text-link"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"],[1,"caption","status-danger"],[1,"form-control-group","accept-group"],["formControlName","terms",3,"required"],["href","#","target","_blank"],["aria-label","Social sign in",1,"links"],[1,"socials"],[4,"ngFor","ngForOf"],[3,"routerLink","with-icon",4,"ngIf"],[3,"with-icon",4,"ngIf"],[3,"routerLink"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"]],template:function(o,i){o&1&&(l(0,"h1",1),d(1,"Register"),s(),h(2,pi,6,1,"nb-alert",2)(3,gi,6,1,"nb-alert",3),l(4,"div",4)(5,"div",5)(6,"label",6),d(7,"Login:"),s(),w(8,"input",7)(9,"ngx-validation-message",8),s(),l(10,"div",5)(11,"label",9),d(12,"Email address:"),s(),w(13,"input",10)(14,"ngx-validation-message",11),s(),l(15,"div",5)(16,"label",12),d(17,"Password:"),s(),w(18,"input",13)(19,"ngx-validation-message",14),s(),l(20,"div",5)(21,"label",15),d(22,"Confirm Password:"),s(),w(23,"input",16)(24,"ngx-validation-message",17),h(25,hi,2,0,"p",18),s(),h(26,fi,6,1,"div",19),l(27,"button",20),R("click",function(){return i.register()}),d(28," Register "),s()(),h(29,Pi,4,1,"section",21),l(30,"section",22),d(31," Already have an account? "),l(32,"a",23),d(33,"Log in"),s()()),o&2&&(a(2),u("ngIf",i.showMessages.error&&(i.errors==null?null:i.errors.length)&&!i.submitted),a(),u("ngIf",i.showMessages.success&&(i.messages==null?null:i.messages.length)&&!i.submitted),a(),u("formGroup",i.registerForm),a(4),u("status",i.login.dirty?i.login.invalid?"danger":"success":""),O("aria-invalid",i.login.invalid&&i.login.touched?!0:null),a(),u("showMinLength",(i.login==null?null:i.login.hasError("minlength"))&&i.login.touched)("showMaxLength",(i.login==null?null:i.login.hasError("maxlength"))&&i.login.touched)("minLength",i.minLoginLength)("maxLength",i.maxLoginLength)("showRequired",(i.login==null||i.login.errors==null?null:i.login.errors.required)&&i.login.touched),a(4),u("status",i.email.dirty?i.email.invalid?"danger":"success":""),O("aria-invalid",i.email.invalid&&i.email.touched?!0:null),a(),u("showPattern",(i.email==null?null:i.email.hasError("pattern"))&&i.email.touched)("showRequired",(i.email==null||i.email.errors==null?null:i.email.errors.required)&&i.email.touched),a(4),u("status",i.password.dirty?i.password.invalid?"danger":"success":""),a(),u("showMinLength",(i.password==null?null:i.password.hasError("minlength"))&&i.password.touched)("showMaxLength",(i.password==null?null:i.password.hasError("maxlength"))&&i.password.touched)("showRequired",(i.password==null||i.password.errors==null?null:i.password.errors.required)&&i.password.touched)("minLength",i.minLength)("maxLength",i.maxLength),a(4),u("status",i.confirmPassword.dirty?i.confirmPassword.invalid||i.password.value!=i.confirmPassword.value?"danger":"success":""),a(),u("showMinLength",(i.confirmPassword==null?null:i.confirmPassword.hasError("minlength"))&&i.confirmPassword.touched)("showMaxLength",(i.confirmPassword==null?null:i.confirmPassword.hasError("maxlength"))&&i.confirmPassword.touched)("showRequired",(i.confirmPassword==null||i.confirmPassword.errors==null?null:i.confirmPassword.errors.required)&&i.confirmPassword.touched)("minLength",i.minLength)("maxLength",i.maxLength),a(),u("ngIf",i.password.value!=i.confirmPassword.value),a(),u("ngIf",i.getConfigValue("forms.register.terms")),a(),E("btn-pulse",i.submitted),u("disabled",i.submitted||!i.registerForm.valid||!(i.terms!=null&&i.terms.value)||(i.password==null?null:i.password.value)!=(i.confirmPassword==null?null:i.confirmPassword.value)),a(2),u("ngIf",i.socialLinks&&i.socialLinks.length>0))},dependencies:[j,$,G,J,At,K,Y,U,D,z,ae,X,Fe,ee,Z],styles:[`[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:2rem}





`],changeDetection:0});let t=r;return t})();var bt=(()=>{let r=class r{constructor(n,o={},i){this.service=n,this.options=o,this.router=i,this.redirectDelay=this.getConfigValue("forms.logout.redirectDelay"),this.strategy=this.getConfigValue("forms.logout.strategy")}ngOnInit(){this.logout(this.strategy)}logout(n){this.service.logout(n).subscribe(o=>{let i=o.getRedirect();i&&setTimeout(()=>this.router.navigateByUrl(i),this.redirectDelay)})}getConfigValue(n){return q(this.options,n,null)}};r.\u0275fac=function(o){return new(o||r)(m(M),m(I),m(P))},r.\u0275cmp=k({type:r,selectors:[["ngx-logout"]],decls:2,vars:0,template:function(o,i){o&1&&(l(0,"div"),d(1,"Logging out, please wait..."),s())},encapsulation:2});let t=r;return t})();var Mn=(()=>{let r=class r{constructor(){this.userState$=new fe({}),this.userState$=new fe(this.user)}getUser(){return this.user}setUser(n){this.user=n,this.changeUserState(n)}onUserStateChange(){return this.userState$.pipe(Te())}changeUserState(n){this.userState$.next(n)}setSetting(n){this.user&&(this.user.settings?this.user.settings.themeName=n:this.user.settings={themeName:n},this.changeUserState(this.user))}};r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var Pn=(()=>{let r=class r{constructor(n,o,i){this.userStore=n,this.jsThemes=o,this.themeService=i}initCurrentUser(){return b()}};r.\u0275fac=function(o){return new(o||r)(_(Mn),_(qt),_(Ae))},r.\u0275prov=y({token:r,factory:r.\u0275fac});let t=r;return t})();function xi(t,r){if(t&1&&(l(0,"li",26),d(1),s()),t&2){let e=r.$implicit;a(),x(e)}}function Si(t,r){if(t&1&&(l(0,"nb-alert",22)(1,"p",23)(2,"b"),d(3,"Oh snap!"),s()(),l(4,"ul",24),h(5,xi,2,1,"li",25),s()()),t&2){let e=g();a(5),u("ngForOf",e.errors)}}function Oi(t,r){if(t&1&&(l(0,"li",26),d(1),s()),t&2){let e=r.$implicit;a(),we(" ",e," ")}}function Ei(t,r){if(t&1&&(l(0,"nb-alert",27)(1,"p",23)(2,"b"),d(3,"Hooray!"),s()(),l(4,"ul",24),h(5,Oi,2,1,"li",25),s()()),t&2){let e=g();a(5),u("ngForOf",e.messages)}}function Ti(t,r){if(t&1&&(l(0,"div",6)(1,"label",28),d(2,"Email address:"),s(),w(3,"input",29)(4,"ngx-validation-message",30),s()),t&2){let e=g();a(3),u("status",e.email!=null&&e.email.dirty?e.email!=null&&e.email.invalid?"danger":"success":""),O("aria-invalid",e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?!0:null),a(),u("showPattern",(e.email==null?null:e.email.hasError("pattern"))&&(e.email==null?null:e.email.touched))("showRequired",(e.email==null||e.email.errors==null?null:e.email.errors.required)&&(e.email==null?null:e.email.touched))}}function Ii(t,r){t&1&&(l(0,"nb-checkbox",31),d(1,"Remember me"),s())}function Ri(t,r){if(t&1&&w(0,"nb-icon",39),t&2){let e=g(2).$implicit;u("icon",e.icon)}}function Li(t,r){if(t&1&&d(0),t&2){let e=g(2).$implicit;x(e.title)}}function Vi(t,r){if(t&1&&(l(0,"a",37),h(1,Ri,1,1,"nb-icon",38)(2,Li,1,1,"ng-template",null,0,oe),s()),t&2){let e=re(3),n=g().$implicit;E("with-icon",n.icon),u("routerLink",n.link),O("target",n.target)("class",n.icon),a(),u("ngIf",n.icon)("ngIfElse",e)}}function Ai(t,r){if(t&1&&w(0,"nb-icon",39),t&2){let e=g(2).$implicit;u("icon",e.icon)}}function Di(t,r){if(t&1&&d(0),t&2){let e=g(2).$implicit;x(e.title)}}function qi(t,r){if(t&1&&(l(0,"a"),h(1,Ai,1,1,"nb-icon",38)(2,Di,1,1,"ng-template",null,0,oe),s()),t&2){let e=re(3),n=g().$implicit;E("with-icon",n.icon),O("href",n.url,_e)("target",n.target)("class",n.icon),a(),u("ngIf",n.icon)("ngIfElse",e)}}function Fi(t,r){if(t&1&&(be(0),h(1,Vi,4,7,"a",35)(2,qi,4,7,"a",36),ye()),t&2){let e=r.$implicit;a(),u("ngIf",e.link),a(),u("ngIf",e.url)}}function ji(t,r){if(t&1&&(l(0,"section",32),d(1," or enter with: "),l(2,"div",33),h(3,Fi,3,2,"ng-container",34),s()()),t&2){let e=g();a(3),u("ngForOf",e.socialLinks)}}var Ye=(()=>{let r=class r{get email(){return this.loginForm.get("email")}get login(){return this.loginForm.get("login")}get password(){return this.loginForm.get("password")}constructor(n,o={},i,c,p,he,En){this.service=n,this.options=o,this.cd=i,this.themeService=c,this.fb=p,this.router=he,this.initUserService=En,this.isPasswordRequired=this.getConfigValue("forms.validation.password.required"),this.isEmailRequired=this.getConfigValue("forms.validation.email.required"),this.socialLinks=this.getConfigValue("forms.login.socialLinks"),this.minLength=this.getConfigValue("forms.validation.password.minLength"),this.maxLength=this.getConfigValue("forms.validation.password.maxLength"),this.redirectDelay=this.getConfigValue("forms.login.redirectDelay"),this.showMessages=this.getConfigValue("forms.login.showMessages"),this.strategy=this.getConfigValue("forms.login.strategy"),this.rememberMe=this.getConfigValue("forms.login.rememberMe"),this.submitted=!1,this.alive=!0,this.messages=[],this.errors=[],this.user={}}ngOnInit(){let n=[C.pattern(ge)],o=[],i=[C.minLength(this.minLength),C.maxLength(this.maxLength)];this.isPasswordRequired&&i.push(C.required),this.isEmailRequired&&n.push(C.required),this.loginForm=this.fb.group({password:this.fb.control("",[...i]),login:this.fb.control("",[...o]),rememberMe:this.fb.control(!1)})}sendLogin(){this.user=this.loginForm.value,this.errors=[],this.messages=[],this.submitted=!0,this.service.authenticate(this.strategy,this.user).subscribe(n=>{this.submitted=!1,n.isSuccess()?(this.setTokenForRoutes(),this.messages=n.getMessages(),this.setUserData(n?.getResponse()?.body?.content?.user)):this.errors=n.getErrors();let o=n.getRedirect();o&&setTimeout(()=>this.router.navigateByUrl(o),this.redirectDelay),this.cd.detectChanges()})}setUserData(n){n?localStorage.setItem("user",JSON.stringify(n)):console.error("Error on setUserData with",n)}setTokenForRoutes(){let n=localStorage.getItem("auth_app_token"),{value:o}=JSON.parse(`${n}`);o&&(localStorage.jwt=o)}setTokenForRoutesOrigin(){let n=localStorage.getItem("auth_app_token"),{value:o}=JSON.parse(`${n}`),{access_token:i}=JSON.parse(o);i&&(localStorage.jwt=i)}getConfigValue(n){return q(this.options,n,null)}};r.\u0275fac=function(o){return new(o||r)(m(M),m(I),m(F),m(Ae),m(Q),m(P),m(Pn))},r.\u0275cmp=k({type:r,selectors:[["ngx-login"]],decls:30,vars:19,consts:[["title",""],["id","title",1,"title"],[1,"sub-title"],["outline","danger","role","alert",4,"ngIf"],["outline","success","role","alert",4,"ngIf"],["aria-labelledby","title",3,"formGroup"],[1,"form-control-group"],["for","input-login"],["nbInput","","fullWidth","","id","input-login","formControlName","login","placeholder","Your Login",3,"status"],["label","Login",3,"showPattern","showRequired"],["class","form-control-group",4,"ngIf"],[1,"label-with-link"],["for","input-password",1,"label"],["routerLink","../request-password",1,"forgot-password","caption-2"],["nbInput","","fullWidth","","id","input-password","formControlName","password","type","password","placeholder","Password",3,"status"],["label","Password",3,"showMinLength","showMaxLength","showRequired","minLength","maxLength"],[1,"form-control-group","accept-group"],["formControlName","rememberMe","name","rememberMe",4,"ngIf"],["nbButton","","fullWidth","","status","primary","size","large",3,"click","disabled"],["class","links","aria-label","Social sign in",4,"ngIf"],["aria-label","Register",1,"another-action"],["routerLink","../register",1,"text-link"],["outline","danger","role","alert"],[1,"alert-title"],[1,"alert-message-list"],["class","alert-message",4,"ngFor","ngForOf"],[1,"alert-message"],["outline","success","role","alert"],["for","input-email"],["nbInput","","fullWidth","","id","input-email","formControlName","email","placeholder","Email address",3,"status"],["label","Email address",3,"showPattern","showRequired"],["formControlName","rememberMe","name","rememberMe"],["aria-label","Social sign in",1,"links"],[1,"socials"],[4,"ngFor","ngForOf"],[3,"routerLink","with-icon",4,"ngIf"],[3,"with-icon",4,"ngIf"],[3,"routerLink"],[3,"icon",4,"ngIf","ngIfElse"],[3,"icon"]],template:function(o,i){o&1&&(l(0,"h1",1),d(1,"Login"),s(),l(2,"p",2),d(3,"Hello! Log in with your email."),s(),h(4,Si,6,1,"nb-alert",3)(5,Ei,6,1,"nb-alert",4),l(6,"div",5)(7,"div",6)(8,"label",7),d(9,"Login:"),s(),w(10,"input",8)(11,"ngx-validation-message",9),s(),h(12,Ti,5,4,"div",10),l(13,"div",6)(14,"span",11)(15,"label",12),d(16,"Password:"),s(),l(17,"a",13),d(18,"Forgot Password?"),s()(),w(19,"input",14)(20,"ngx-validation-message",15),s(),l(21,"div",16),h(22,Ii,2,0,"nb-checkbox",17),s(),l(23,"button",18),R("click",function(){return i.sendLogin()}),d(24," Log In "),s()(),h(25,ji,4,1,"section",19),l(26,"section",20),d(27," Don't have an account? "),l(28,"a",21),d(29,"Register"),s()()),o&2&&(a(4),u("ngIf",i.showMessages.error&&(i.errors==null?null:i.errors.length)&&!i.submitted),a(),u("ngIf",i.showMessages.success&&(i.messages==null?null:i.messages.length)&&!i.submitted),a(),u("formGroup",i.loginForm),a(4),u("status",i.login!=null&&i.login.dirty?i.login!=null&&i.login.invalid?"danger":"success":""),O("aria-invalid",i.login!=null&&i.login.invalid&&(i.login!=null&&i.login.touched)?!0:null),a(),u("showPattern",(i.login==null?null:i.login.hasError("pattern"))&&(i.login==null?null:i.login.touched))("showRequired",(i.login==null||i.login.errors==null?null:i.login.errors.required)&&(i.login==null?null:i.login.touched)),a(),u("ngIf",!1),a(7),u("status",i.password!=null&&i.password.dirty?i.password!=null&&i.password.invalid?"danger":"success":""),a(),u("showMinLength",(i.password==null?null:i.password.hasError("minlength"))&&(i.password==null?null:i.password.touched))("showMaxLength",(i.password==null?null:i.password.hasError("maxlength"))&&(i.password==null?null:i.password.touched))("showRequired",(i.password==null||i.password.errors==null?null:i.password.errors.required)&&(i.password==null?null:i.password.touched))("minLength",i.minLength)("maxLength",i.maxLength),a(2),u("ngIf",i.rememberMe),a(),E("btn-pulse",i.submitted),u("disabled",i.submitted||!i.loginForm.valid),a(2),u("ngIf",i.socialLinks&&i.socialLinks.length>0))},dependencies:[j,$,G,J,K,Y,U,D,z,ae,X,Fe,ee,Z],encapsulation:2,changeDetection:0});let t=r;return t})();var yt=(()=>{let r=class r{constructor(n,o){this.auth=n,this.location=o,this.alive=!0,this.authenticated=!1,this.token="",this.subscription=n.onAuthenticationChange().pipe(Mt(()=>this.alive)).subscribe(i=>{this.authenticated=i})}back(){return this.location.back(),!1}ngOnDestroy(){this.alive=!1}};r.\u0275fac=function(o){return new(o||r)(m(M),m(Rt))},r.\u0275cmp=k({type:r,selectors:[["ngx-auth"]],decls:10,vars:0,consts:[[1,"navigation"],["href","#","aria-label","Back",1,"link","back-link",3,"click"],["icon","arrow-back"]],template:function(o,i){o&1&&(l(0,"nb-layout")(1,"nb-layout-column")(2,"nb-card")(3,"nb-card-header")(4,"nav",0)(5,"a",1),R("click",function(){return i.back()}),w(6,"nb-icon",2),s()()(),l(7,"nb-card-body")(8,"nb-auth-block"),w(9,"router-outlet"),s()()()()())},dependencies:[ot,ae,Wt,zt,Bt,jt,Ft,an],styles:[`[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0;height:calc(100vh - 5rem)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:inline-block;text-decoration:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2rem;vertical-align:middle}[_nghost-%COMP%]   .links[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}[_nghost-%COMP%]   nb-card-body[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   nb-auth-block[_ngcontent-%COMP%]{margin:auto}@media (max-width: 767.98px){[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-radius:0;height:100vh}}[_nghost-%COMP%]     nb-layout .layout .layout-container .content .columns nb-layout-column{padding:2.5rem}@media (max-width: 767.98px){[_nghost-%COMP%]     nb-layout .layout .layout-container .content .columns nb-layout-column{padding:0}}











`]});let t=r;return t})();var Bi=[$t.forChild(),Kt.forChild(),le,ue,Ut,Ht,ce,de,Jt,Gt,Ve,Le,H],Nn=(()=>{let r=class r{};r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=A({type:r}),r.\u0275inj=L({imports:[Bi]});let t=r;return t})();var Ee=["user","product","category"],kn={guest:{view:"*"},user:{parent:"guest",create:"comments",view:["current-user"]},admin:{parent:"user",view:["current-user","users"],edit:["current-user","users"]}},qo={guest:{view:Ee},user:{parent:"guest"},master:{create:Ee,view:Ee,edit:Ee,remove:Ee},admin:{parent:"master"}};var Wi=[{path:"",component:yt,children:[{path:"",component:Ye},{path:"login",component:Ye},{path:"register",component:_t},{path:"logout",component:bt},{path:"request-password",component:ht},{path:"reset-password",component:ft}]}],xn=(()=>{let r=class r{};r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=A({type:r}),r.\u0275inj=L({imports:[Ce.forChild(Wi),Ce]});let t=r;return t})();var Sn=[{url:"https://github.com/akveo/nebular",target:"_blank",icon:"github"},{url:"https://www.facebook.com/akveo/",target:"_blank",icon:"facebook"},{url:"https://twitter.com/akveo_inc",target:"_blank",icon:"twitter"}],On={strategies:[dt.setup({name:"email",baseEndpoint:Lt?.API_PATH||"/api/",token:{class:nn,key:"content.value"},login:{endpoint:"Token/GetFull",method:"post"},register:{endpoint:"auth/sign-up",method:"post"},logout:{endpoint:"auth/sign-out",method:"post"},requestPass:{endpoint:"auth/request-pass",method:"post"},resetPass:{endpoint:"auth/reset-pass",method:"post"},refreshToken:{endpoint:"auth/refresh-token",method:"post"}})],forms:{login:{socialLinks:Sn},register:{socialLinks:Sn},validation:{fullName:{required:!0,minLength:6,maxLength:20}}}};var zi=[yn,bn];var Ui=[De,qe,le,je,ue,de,ce];function Hi(t){return["/auth/login","/auth/sign-up","/auth/request-pass","/auth/refresh-token"].some(r=>t.url.includes(r))}var us=(()=>{let r=class r{static forRoot(){return{ngModule:r,providers:[{provide:$e,useValue:Hi},{provide:it,useClass:cn,multi:!0},{provide:it,useClass:fn,multi:!0},...zi]}}};r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=A({type:r}),r.\u0275inj=L({providers:[hn.forRoot({accessControl:kn}).providers,{provide:W,useClass:_n},{provide:Ge,useClass:Ge}],imports:[xn,Ve,H,Nn,Ui,ln.forRoot(On)]});let t=r;return t})();export{W as a,Mr as b,hn as c,Mn as d,Pn as e,Pe as f,Bn as g,ln as h,bn as i,yn as j,qo as k,Hi as l,us as m};
