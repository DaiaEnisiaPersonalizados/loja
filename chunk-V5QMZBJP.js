import{b as St,c as kt}from"./chunk-S7YA4UOH.js";import{b as Pt,c as wt}from"./chunk-JIJSIPFI.js";import"./chunk-H3PR6A5N.js";import{a as I}from"./chunk-7TYMS46X.js";import{a as $}from"./chunk-2BSBAHUI.js";import"./chunk-OBRPWN6S.js";import{d as R,e as q,g as Q}from"./chunk-7VISWSNC.js";import"./chunk-AJCNGBOM.js";import{$ as w,$b as O,Dd as ht,Ea as r,Ed as vt,Fa as o,Fd as _t,Ga as m,Ja as F,Ma as v,N as it,O as E,Oa as p,Pd as bt,Q as G,Qd as xt,Ra as b,Sa as nt,V as N,W as T,Xa as K,Ya as l,Za as V,Zb as ct,_ as P,_a as f,a as et,bc as Y,bd as st,cd as lt,dd as L,ea as x,ed as U,fb as J,fd as j,gd as z,hb as S,hd as dt,i as k,ia as C,ib as rt,id as mt,ja as s,jb as A,jd as pt,ka as y,kb as X,kd as ut,ld as gt,le as Ct,md as ft,me as yt,ne as It,sb as B,ta as u,tb as D,ub as ot,va as d,wb as M,xb as at}from"./chunk-6JUWCAAP.js";var Dt=()=>({height:"100%",padding:0}),Mt=()=>({height:"100%",padding:"20px 0","min-height":"175px"});function Ot(e,i){e&1&&m(0,"div",21)}function Lt(e,i){if(e&1){let a=F();r(0,"div",13)(1,"nb-flip-card",14,0)(3,"nb-card-front")(4,"nb-card",15)(5,"nb-card-header"),l(6),o(),r(7,"nb-card-body",16),m(8,"img",17),o(),r(9,"nb-card-footer",18),v("click",function(){let n=P(a).$implicit,c=p(2);return w(c.openProductView(n.id))}),l(10," Show-me "),o()()(),r(11,"nb-card-back")(12,"nb-card",19)(13,"nb-card-header"),l(14,"Product Data"),o(),r(15,"nb-card-body",16)(16,"p"),l(17),o(),r(18,"p"),l(19),o(),r(20,"p"),l(21,"Available: \u2705"),o(),r(22,"p"),l(23),S(24,"currency"),o()(),r(25,"nb-card-footer",18),v("click",function(){let n=P(a).$implicit,c=p(2);return w(c.openProductView(n.id))}),l(26," Show-me "),o()()()(),u(27,Ot,1,0,"div",20),o()}if(e&2){let a=i.$implicit,t=i.index,n=p(2);s(),d("flipped",!1),s(5),V(a.name),s(),d("ngStyle",J(14,Dt)),s(),b("src",n.getPrimaryAttachment(a.id),C),nt("alt","Product ",a.id,""),s(7),d("ngStyle",J(15,Mt)),s(2),f("Reference: ",a.id,""),s(2),f("Name: ",a.name,""),s(4),f("Price: ",A(24,11,a.price||0,"BRL"),""),s(4),d("ngIf",(t+1)%3===0)}}function Ut(e,i){if(e&1&&(r(0,"div",11),u(1,Lt,28,16,"div",12),o()),e&2){let a=p();s(),d("ngForOf",a.service.data)}}var Nt=(()=>{let i=class i{constructor(t,n){this.router=t,this.injector=n,this.attachments={},this.progress=1,this.getImageSource=c=>this.upload.imageSrc(c),this.category=n.get($),this.service=n.get(I),this.notify=n.get(q),this.upload=n.get(Q)}ngOnInit(){this.updatePagination(),this.loadAttachments()}ngOnDestroy(){}updatePagination(){this.service.pagination.page=1,this.service.pagination.size=40}openProductView(t){this.router.navigate(["pages/product/view/"+t])}loadAttachments(){this.upload.getAttachments(R.PRODUCT,0).subscribe(t=>k(this,null,function*(){t.success?this.updateAttachmentsUrl(t.content):console.error("Falha ao obter Arquivos",t)}))}updateAttachmentsUrl(t){for(let n of t)this.attachments[n.valueId]||(this.attachments[n.valueId]=[]),this.attachments[n.valueId].push(et({url:this.getImageSource(n)},n))}getPrimaryAttachment(t){return this.attachments?.[t]?.[0]?.url||this.upload.defaultPhoto}setPage(t,n){let c=this.service.pagination.pageCount,g=this.service.pagination.page+t;g>0&&g<=c&&(this.service.pagination.page=g,this.service.refreshData()),this.progress=this.service.pagination.page*100/c,n&&t&&t==1?n.flipped=!0:n&&t==-1&&(n.flipped=!1)}};i.\u0275fac=function(n){return new(n||i)(y(O),y(x))},i.\u0275cmp=N({type:i,selectors:[["ngx-product-list"]],decls:15,vars:5,consts:[["flip",""],[1,"row","no-spacing","d-flex","justify-content-between"],[1,"col-auto","mb-4"],[1,"no-spacing"],[3,"asPopUp"],["class","row",4,"ngIf"],[2,"display","flex","align-items","center"],["size","medium"],["icon","chevron-left-outline",3,"click"],[2,"flex","1",3,"value","status","displayValue"],["icon","chevron-right-outline",3,"click"],[1,"row"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[3,"flipped"],["accent","primary",1,"card-col"],[3,"ngStyle"],[1,"img",3,"src","alt"],[1,"show-me",3,"click"],["accent","info",1,"card-col"],["class","d-none d-sm-block w-100",4,"ngIf"],[1,"d-none","d-sm-block","w-100"]],template:function(n,c){n&1&&(r(0,"nb-card-header",1)(1,"div",2)(2,"h1",3),l(3,"Products"),o()(),r(4,"div",2),m(5,"base-product-filter",4),o()(),u(6,Ut,2,1,"div",5),r(7,"nb-card")(8,"nb-card-body")(9,"div",6)(10,"nb-actions",7)(11,"nb-action",8),v("click",function(){return c.setPage(-1)}),o()(),m(12,"nb-progress-bar",9),r(13,"nb-actions",7)(14,"nb-action",10),v("click",function(){return c.setPage(1)}),o()()()()()),n&2&&(s(5),d("asPopUp",!0),s(),d("ngIf",c.service==null||c.service.data==null?null:c.service.data.length),s(6),d("value",c.progress)("status","info")("displayValue",!0))},dependencies:[B,D,ot,St,z,U,j,L,dt,mt,pt,ht,vt,bt,M],styles:[".row[_ngcontent-%COMP%]{text-align:center}.img[_ngcontent-%COMP%]{width:100%;height:200px;border-radius:4px;object-fit:contain}.left[_ngcontent-%COMP%]{text-align:left}.show-me[_ngcontent-%COMP%]:hover{cursor:pointer}.no-spacing[_ngcontent-%COMP%]{margin:0;padding:0}"]});let e=i;return e})();function jt(e,i){if(e&1&&(r(0,"div",12),m(1,"img",27),o()),e&2){let a=p(2);s(),b("src",a.attachments[a.selectedImage||0].url,C)}}function zt(e,i){if(e&1&&m(0,"img",27),e&2){let a=p(2);b("src",a.upload.defaultPhoto,C)}}function Rt(e,i){if(e&1){let a=F();r(0,"img",31),v("click",function(){let n=P(a).index,c=p(3);return w(c.selectedImage=n)}),o()}if(e&2){let a=i.$implicit;d("src",a.url,C)}}function qt(e,i){if(e&1&&(r(0,"div",28)(1,"div",29),u(2,Rt,1,1,"img",30),o()()),e&2){let a=p(2);s(2),d("ngForOf",a.attachments)}}function $t(e,i){if(e&1&&(r(0,"nb-card-header")(1,"h1",7),l(2),o()()),e&2){let a=p(2);s(2),f(" ",(a.service==null||a.service.data==null?null:a.service.data.name)||"Loading"," ")}}function Qt(e,i){if(e&1&&m(0,"nb-tag",35),e&2){let a=i.$implicit;b("status",a.category.color),b("text",a.category.name)}}function Wt(e,i){if(e&1&&(r(0,"nb-tag-list",33),u(1,Qt,1,2,"nb-tag",34),o()),e&2){let a=p(3);s(),d("ngForOf",a.service.data.categories)}}function Ht(e,i){e&1&&(r(0,"div",36),m(1,"nb-tag",37),o())}function Gt(e,i){if(e&1&&(r(0,"p",18)(1,"strong"),l(2,"Categories:"),o(),u(3,Wt,2,1,"nb-tag-list",32)(4,Ht,2,0,"ng-template",null,1,X),o()),e&2){let a=K(5),t=p(2);s(3),d("ngIf",t.service==null||t.service.data==null?null:t.service.data.categories.length)("ngIfElse",a)}}function Kt(e,i){if(e&1&&(r(0,"div",9)(1,"div",10)(2,"div",9),u(3,jt,2,1,"div",11)(4,zt,1,1,"ng-template",12,0,X)(6,qt,3,1,"div",13),o()(),r(7,"div",10)(8,"nb-card",14),u(9,$t,3,1,"nb-card-header",15),r(10,"nb-card-body")(11,"p")(12,"strong"),l(13,"Description:"),o(),r(14,"span",16),l(15),o()(),u(16,Gt,6,2,"p",17),r(17,"p")(18,"strong"),l(19,"Customizable:"),o(),r(20,"span",18),l(21," \u2705 "),o()(),r(22,"p")(23,"strong"),l(24,"Reference:"),o(),r(25,"span",18),l(26),o()(),r(27,"p",19)(28,"span",20),l(29),S(30,"currency"),o()()(),r(31,"nb-card-footer",9)(32,"button",21),m(33,"nb-icon",22),l(34," Purchase "),o(),r(35,"button",21),m(36,"nb-icon",23),l(37," Add to Cart "),o(),r(38,"button",24),m(39,"nb-icon",25),r(40,"span",26),l(41," Buy on Whatsapp "),o()()()()()()),e&2){let a=K(5),t=p();s(3),d("ngIf",t.attachments==null?null:t.attachments.length)("ngIfElse",a),s(3),d("ngIf",t.attachments==null?null:t.attachments.length),s(3),d("ngIf",!1),s(6),f(" ",(t.service==null||t.service.data==null?null:t.service.data.description)||"Loading",""),s(),d("ngIf",t.service==null||t.service.data==null?null:t.service.data.categories),s(10),f(" ",(t.service==null||t.service.data==null?null:t.service.data.id)||(t.service==null||t.service.data==null?null:t.service.data.origin_id)||"Loading",""),s(3),f(" ",A(30,8,(t.service==null||t.service.data==null?null:t.service.data.price)||0,"BRL"),"")}}var Tt=(()=>{let i=class i{constructor(t,n){this.injector=t,this.a_route=n,this.attachments=[],this.selectedImage=0,this.getImageSource=c=>this.upload.imageSrc(c),this.id=this.a_route.snapshot.params.id||"new",this.service=t.get(I),this.notify=t.get(q),this.upload=t.get(Q)}ngOnInit(){this.getData()}ngOnDestroy(){}getData(){if(!this.id||this.id=="new"){this.notify.showNoData();return}this.service.getOneData(this.id),this.loadAttachments()}goBack(t){t?.preventDefault(),history.back()}loadAttachments(){this.id&&this.id!="new"?this.upload.getAttachments(R.PRODUCT,parseInt(this.id),!0).subscribe(t=>k(this,null,function*(){t.success?this.updateAttachmentsUrl(t.content):console.error("Falha ao obter Arquivos",t)})):console.error("Invalid ID:",this.id)}updateAttachmentsUrl(t){this.attachments=t||[];for(let n in this.attachments)this.attachments[n].url||(this.attachments[n].url=this.getImageSource(this.attachments[n]))}};i.\u0275fac=function(n){return new(n||i)(y(x),y(ct))},i.\u0275cmp=N({type:i,selectors:[["ngx-product-view"]],decls:11,vars:5,consts:[["noAttachment",""],["noCategories",""],[1,"row","no-spacing","d-flex"],[1,"col-6","mb-4"],["nbButton","","outline","","status","info","size","small",1,"no-spacing",3,"click"],["icon","arrow-ios-back-outline"],[1,"ml-3","mb-4"],[2,"font-size","2rem","margin","0"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-4","d-md-block"],["class","col-9 mb-4 d-md-block",4,"ngIf","ngIfElse"],[1,"col-9","mb-4","d-md-block"],["class","col-3 mb-4 d-md-block",4,"ngIf"],["accent","primary",1,"card-col"],[4,"ngIf"],[1,"d-block","mt-2"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"d-block","mt-4"],[2,"font-size","2rem"],["nbButton","","fullWidth","","status","info","size","large",1,"col","m-2"],["icon","shopping-bag"],["icon","shopping-cart"],["nbButton","","fullWidth","","status","basic","size","large",1,"col","m-2"],["icon","message-circle",2,"color","basic"],[2,"color","basic"],[1,"hundred",3,"src"],[1,"col-3","mb-4","d-md-block"],[2,"display","flex","flex-wrap","wrap","cursor","pointer"],["class","hundred mb-2","title","Click to View",3,"src","click",4,"ngFor","ngForOf"],["title","Click to View",1,"hundred","mb-2",3,"click","src"],["class","mt-2 d-block",4,"ngIf","ngIfElse"],[1,"mt-2","d-block"],["appearance","outline",3,"status","text",4,"ngFor","ngForOf"],["appearance","outline",3,"status","text"],[1,"d-block"],["appearance","outline","text","No Linked Categories",1,"mt-2"]],template:function(n,c){n&1&&(r(0,"div",2)(1,"div",3)(2,"button",4),v("click",function(g){return c.goBack(g)}),m(3,"nb-icon",5),r(4,"div"),l(5),S(6,"translate"),o()()(),r(7,"div",6)(8,"h1",7),l(9),o()()(),u(10,Kt,42,11,"div",8)),n&2&&(s(5),V(rt(6,3,"BTN_BACK")),s(4),f(" ",(c.service==null||c.service.data==null?null:c.service.data.name)||"Loading"," "),s(),d("ngIf",c.service==null?null:c.service.data))},dependencies:[B,D,z,U,j,L,gt,st,Ct,yt,M,Pt],styles:[".hundred[_ngcontent-%COMP%]{width:100%;max-width:100%;border-radius:1%}"]});let e=i;return e})();var Ft=(()=>{let i=class i{constructor(t,n){this.router=t,this.injector=n,this.executed=!1,this.waiting=!1,this.category=n.get($),this.product=n.get(I),this.category.hasDataChanges.subscribe({next:c=>this.updateQueryParams(c)})}updateQueryParams(t,n){if(!t?.length&&!n||this.waiting)return;this.waiting=!0,setTimeout(()=>this.waiting=!1,1e3);let h=t.filter(_=>_?.selected).map(_=>_.id).join(","),g={queryParams:{categories:h}};this.router.navigate(["pages/product/list"],n||h?.length&&g||{})}resolve(t,n){let c={queryParams:t?.queryParams},h=t?.queryParams?.categories,g=t?.queryParams?.products,_=t?.queryParams?.field,H=t?.queryParams?.key,Z=h?.length>0,tt=g?.length>0;if(!this.executed&&(Z||tt))return this.router.navigate(["pages/product/list"],c),this.updateQueryParams([],c),this.executed=!0;this.product.clearFilter(),Z&&this.product.setFilter({field:"categories.categoryid",key:h}),tt&&this.product.setFilter({field:"categories.productid",key:g}),_&&H&&setTimeout(()=>{this.product.setFilter({field:_,key:H}),this.product.refreshData()},1e3),_&&H||setTimeout(()=>this.product.refreshData(),500)}};i.\u0275fac=function(n){return new(n||i)(G(O),G(x))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var Jt=[{path:"list",resolve:{filterData:Ft},runGuardsAndResolvers:"always",component:Nt},{path:"view/:id",component:Tt},{path:"**",redirectTo:"list"}],Vt=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=T({type:i}),i.\u0275inj=E({imports:[Y.forChild(Jt),Y]});let e=i;return e})();var ke=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=T({type:i}),i.\u0275inj=E({imports:[at,wt,kt,ut,ft,lt,It,_t,xt,Vt]});let e=i;return e})();export{ke as ProductModule};
