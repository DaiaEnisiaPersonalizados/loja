import{b as Nt,c as Tt}from"./chunk-IREIUVGM.js";import{c as $,d as kt}from"./chunk-T5Q35ODV.js";import"./chunk-PJ5H7VUD.js";import{a as w}from"./chunk-3VYRS27W.js";import{a as G}from"./chunk-YXQOJ4T4.js";import"./chunk-7WKCYMLP.js";import{d as H,e as Q,g as K}from"./chunk-5SHEUPML.js";import"./chunk-54LLRSOY.js";import{$b as nt,$c as mt,Ad as xt,Bd as Ct,Ca as o,Cd as yt,Da as a,Ea as m,Ha as F,Ka as b,L as ct,M as T,Ma as p,Md as It,Nd as Pt,O as Z,Pa as C,Qa as V,T as B,U as D,Va as tt,Wa as l,Xa as A,Xb as pt,Y as S,Ya as g,Z as E,Za as O,Zb as z,a as at,ad as ut,bd as R,ca as I,cd as j,db as et,dd as q,eb as st,ed as W,fb as u,fd as ft,g as N,ga as x,gb as h,gd as gt,ha as c,hb as k,hd as ht,ia as P,ib as it,id as vt,ie as wt,jd as _t,je as St,kd as bt,ke as Et,qb as M,ra as f,rb as L,sb as lt,ta as d,ub as U,vb as dt}from"./chunk-M3I5HJ6Y.js";var Ut=()=>({height:"100%",padding:0}),zt=()=>({height:"100%",padding:"20px 0","min-height":"175px"});function Rt(e,i){e&1&&m(0,"div",21)}function jt(e,i){if(e&1){let r=F();o(0,"div",13)(1,"nb-flip-card",14,0)(3,"nb-card-front")(4,"nb-card",15)(5,"nb-card-header"),l(6),a(),o(7,"nb-card-body",16),m(8,"img",17),a(),o(9,"nb-card-footer",18),b("click",function(){let n=S(r).$implicit,s=p(2);return E(s.openProductView(n.id))}),l(10),u(11,"translate"),a()()(),o(12,"nb-card-back")(13,"nb-card",19)(14,"nb-card-header"),l(15),u(16,"translate"),a(),o(17,"nb-card-body",16)(18,"p"),l(19),u(20,"translate"),a(),o(21,"p"),l(22),u(23,"translate"),a(),o(24,"p"),l(25),u(26,"translate"),a(),o(27,"p"),l(28),u(29,"translate"),u(30,"currency"),a()(),o(31,"nb-card-footer",18),b("click",function(){let n=S(r).$implicit,s=p(2);return E(s.openProductView(n.id))}),l(32),u(33,"translate"),a()()()(),f(34,Rt,1,0,"div",20),a()}if(e&2){let r=i.$implicit,t=i.index,n=p(2);c(),d("flipped",!1),c(5),A(r.name),c(),d("ngStyle",et(35,Ut)),c(),C("src",n.getPrimaryAttachment(r.id),x),V("alt","Product ",r.id,""),c(2),g(" ",h(11,18,"SHOW_ME")," "),c(5),g(" ",h(16,20,"PRODUCT_DATA")," "),c(2),d("ngStyle",et(36,zt)),c(2),O("",h(20,22,"REFERENCE"),": ",r.id,""),c(3),O("",h(23,24,"NAME"),": ",r.name,""),c(3),g("",h(26,26,"AVAILABLE"),": \u2705"),c(3),O("",h(29,28,"PRICE"),": ",k(30,30,r.price||0,"BRL"),""),c(4),g(" ",h(33,33,"SHOW_ME")," "),c(2),d("ngIf",(t+1)%3===0)}}function qt(e,i){if(e&1&&(o(0,"div",11),f(1,jt,35,37,"div",12),a()),e&2){let r=p();c(),d("ngForOf",r.service.data)}}var Dt=(()=>{let i=class i{constructor(t,n){this.router=t,this.injector=n,this.attachments={},this.progress=1,this.getImageSource=s=>this.upload.imageSrc(s),this.category=n.get(G),this.service=n.get(w),this.notify=n.get(Q),this.upload=n.get(K)}ngOnInit(){this.updatePagination(),this.loadAttachments()}ngOnDestroy(){}updatePagination(){this.service.pagination.page=1,this.service.pagination.size=40}openProductView(t){this.router.navigate(["pages/product/view/"+t])}loadAttachments(){this.upload.getAttachments(H.PRODUCT,0).subscribe(t=>N(this,null,function*(){t.success?this.updateAttachmentsUrl(t.content):console.error("Falha ao obter Arquivos",t)}))}updateAttachmentsUrl(t){for(let n of t)this.attachments[n.valueId]||(this.attachments[n.valueId]=[]),this.attachments[n.valueId].push(at({url:this.getImageSource(n)},n))}getPrimaryAttachment(t){return this.attachments?.[t]?.[0]?.url||this.upload.defaultPhoto}setPage(t,n){let s=this.service.pagination.pageCount,v=this.service.pagination.page+t;v>0&&v<=s&&(this.service.pagination.page=v,this.service.refreshData()),this.progress=this.service.pagination.page*100/s,n&&t&&t==1?n.flipped=!0:n&&t==-1&&(n.flipped=!1)}};i.\u0275fac=function(n){return new(n||i)(P(z),P(I))},i.\u0275cmp=B({type:i,selectors:[["ngx-product-list"]],decls:16,vars:8,consts:[["flip",""],[1,"row","no-spacing","d-flex","justify-content-between"],[1,"col-auto","mb-4"],[1,"no-spacing"],[3,"asPopUp"],["class","row",4,"ngIf"],[2,"display","flex","align-items","center"],["size","medium"],["icon","chevron-left-outline",3,"click"],[2,"flex","1",3,"value","status","displayValue"],["icon","chevron-right-outline",3,"click"],[1,"row"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[3,"flipped"],["accent","primary",1,"card-col"],[3,"ngStyle"],[1,"img",3,"src","alt"],[1,"show-me",3,"click"],["accent","info",1,"card-col"],["class","d-none d-sm-block w-100",4,"ngIf"],[1,"d-none","d-sm-block","w-100"]],template:function(n,s){n&1&&(o(0,"nb-card-header",1)(1,"div",2)(2,"h1",3),l(3),u(4,"translate"),a()(),o(5,"div",2),m(6,"base-product-filter",4),a()(),f(7,qt,2,1,"div",5),o(8,"nb-card")(9,"nb-card-body")(10,"div",6)(11,"nb-actions",7)(12,"nb-action",8),b("click",function(){return s.setPage(-1)}),a()(),m(13,"nb-progress-bar",9),o(14,"nb-actions",7)(15,"nb-action",10),b("click",function(){return s.setPage(1)}),a()()()()()),n&2&&(c(3),g(" ",h(4,6,"PRODUCT"),"s "),c(3),d("asPopUp",!0),c(),d("ngIf",s.service==null||s.service.data==null?null:s.service.data.length),c(6),d("value",s.progress)("status","info")("displayValue",!0))},dependencies:[M,L,lt,Nt,W,j,q,R,ft,gt,ht,xt,Ct,It,U,$],styles:[".row[_ngcontent-%COMP%]{text-align:center}.img[_ngcontent-%COMP%]{width:100%;height:200px;border-radius:4px;object-fit:contain}.left[_ngcontent-%COMP%]{text-align:left}.show-me[_ngcontent-%COMP%]:hover{cursor:pointer}.no-spacing[_ngcontent-%COMP%]{margin:0;padding:0}"]});let e=i;return e})();var Wt=(e,i)=>({id:e,name:i});function $t(e,i){if(e&1&&(o(0,"div",12),m(1,"img",23),a()),e&2){let r=p(2);c(),C("src",r.attachments[r.selectedImage||0].url,x)}}function Ht(e,i){if(e&1&&m(0,"img",23),e&2){let r=p(2);C("src",r.upload.defaultPhoto,x)}}function Qt(e,i){if(e&1){let r=F();o(0,"img",27),b("click",function(){let n=S(r).index,s=p(3);return E(s.selectedImage=n)}),a()}if(e&2){let r=i.$implicit;d("src",r.url,x)}}function Gt(e,i){if(e&1&&(o(0,"div",24)(1,"div",25),f(2,Qt,1,1,"img",26),a()()),e&2){let r=p(2);c(2),d("ngForOf",r.attachments)}}function Kt(e,i){if(e&1&&(o(0,"nb-card-header")(1,"h1",7),l(2),a()()),e&2){let r=p(2);c(2),g(" ",(r.service==null||r.service.data==null?null:r.service.data.name)||"Loading"," ")}}function Yt(e,i){if(e&1&&m(0,"nb-tag",31),e&2){let r=i.$implicit;C("status",r.category.color),C("text",r.category.name)}}function Jt(e,i){if(e&1&&(o(0,"nb-tag-list",29),f(1,Yt,1,2,"nb-tag",30),a()),e&2){let r=p(3);c(),d("ngForOf",r.service.data.categories)}}function Xt(e,i){e&1&&(o(0,"div",32),m(1,"nb-tag",33),a())}function Zt(e,i){if(e&1&&(o(0,"p",18)(1,"strong"),l(2,"Categories:"),a(),f(3,Jt,2,1,"nb-tag-list",28)(4,Xt,2,0,"ng-template",null,1,it),a()),e&2){let r=tt(5),t=p(2);c(3),d("ngIf",t.service==null||t.service.data==null?null:t.service.data.categories.length)("ngIfElse",r)}}function te(e,i){e&1&&(o(0,"button",34),m(1,"nb-icon",35),l(2," Purchase "),a())}function ee(e,i){e&1&&(o(0,"button",34),m(1,"nb-icon",36),l(2," Add to Cart "),a())}function ie(e,i){if(e&1&&(o(0,"a",37),u(1,"translate"),m(2,"nb-icon",38),o(3,"span",39),l(4," Buy on Whatsapp "),a()()),e&2){let r=p(2);V("href","https://wa.me/5551995480671?text=",k(1,2,"BUY_MSG_WPP",st(5,Wt,r.id,(r.service==null||r.service.data==null?null:r.service.data.name)||"")),"",x)}}function ne(e,i){if(e&1&&(o(0,"div",9)(1,"div",10)(2,"div",9),f(3,$t,2,1,"div",11)(4,Ht,1,1,"ng-template",12,0,it)(6,Gt,3,1,"div",13),a()(),o(7,"div",10)(8,"nb-card",14),f(9,Kt,3,1,"nb-card-header",15),o(10,"nb-card-body")(11,"p")(12,"strong"),l(13,"Description:"),a(),o(14,"span",16),l(15),a()(),f(16,Zt,6,2,"p",17),o(17,"p")(18,"strong"),l(19,"Customizable:"),a(),o(20,"span",18),l(21," \u2705 "),a()(),o(22,"p")(23,"strong"),l(24,"Reference:"),a(),o(25,"span",18),l(26),a()(),o(27,"p",19)(28,"span",20),l(29),u(30,"currency"),a()()(),o(31,"nb-card-footer",9),f(32,te,3,0,"button",21)(33,ee,3,0,"button",21)(34,ie,5,8,"a",22),a()()()()),e&2){let r=tt(5),t=p();c(3),d("ngIf",t.attachments==null?null:t.attachments.length)("ngIfElse",r),c(3),d("ngIf",t.attachments==null?null:t.attachments.length),c(3),d("ngIf",!1),c(6),g(" ",(t.service==null||t.service.data==null?null:t.service.data.description)||"Loading",""),c(),d("ngIf",t.service==null||t.service.data==null?null:t.service.data.categories),c(10),g(" ",(t.service==null||t.service.data==null?null:t.service.data.id)||(t.service==null||t.service.data==null?null:t.service.data.origin_id)||"Loading",""),c(3),g(" ",k(30,11,(t.service==null||t.service.data==null?null:t.service.data.price)||0,"BRL"),""),c(3),d("ngIf",!1),c(),d("ngIf",!1),c(),d("ngIf",t.service==null?null:t.service.data)}}var Ft=(()=>{let i=class i{constructor(t,n){this.injector=t,this.a_route=n,this.attachments=[],this.selectedImage=0,this.getImageSource=s=>this.upload.imageSrc(s),this.id=this.a_route.snapshot.params.id||"new",this.service=t.get(w),this.notify=t.get(Q),this.upload=t.get(K)}ngOnInit(){this.getData()}ngOnDestroy(){}getData(){if(!this.id||this.id=="new"){this.notify.showNoData();return}this.service.getOneData(this.id),this.loadAttachments()}goBack(t){t?.preventDefault(),history.back()}loadAttachments(){this.id&&this.id!="new"?this.upload.getAttachments(H.PRODUCT,parseInt(this.id),!0).subscribe(t=>N(this,null,function*(){t.success?this.updateAttachmentsUrl(t.content):console.error("Falha ao obter Arquivos",t)})):console.error("Invalid ID:",this.id)}updateAttachmentsUrl(t){this.attachments=t||[];for(let n in this.attachments)this.attachments[n].url||(this.attachments[n].url=this.getImageSource(this.attachments[n]))}};i.\u0275fac=function(n){return new(n||i)(P(I),P(pt))},i.\u0275cmp=B({type:i,selectors:[["ngx-product-view"]],decls:11,vars:5,consts:[["noAttachment",""],["noCategories",""],[1,"row","no-spacing","d-flex"],[1,"col-6","mb-4"],["nbButton","","outline","","status","info","size","small",1,"no-spacing",3,"click"],["icon","arrow-ios-back-outline"],[1,"ml-3","mb-4"],[2,"font-size","2rem","margin","0"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-4","d-md-block"],["class","col-9 mb-4 d-md-block",4,"ngIf","ngIfElse"],[1,"col-9","mb-4","d-md-block"],["class","col-3 mb-4 d-md-block",4,"ngIf"],["accent","primary",1,"card-col"],[4,"ngIf"],[1,"d-block","mt-2"],["class","mt-2",4,"ngIf"],[1,"mt-2"],[1,"d-block","mt-4"],[2,"font-size","2rem"],["nbButton","","fullWidth","","status","info","size","large","class","col m-2",4,"ngIf"],["nbButton","","fullWidth","","status","basic","size","large","class","col m-2","target","_blank",3,"href",4,"ngIf"],[1,"hundred",3,"src"],[1,"col-3","mb-4","d-md-block"],[2,"display","flex","flex-wrap","wrap","cursor","pointer"],["class","hundred mb-2","title","Click to View",3,"src","click",4,"ngFor","ngForOf"],["title","Click to View",1,"hundred","mb-2",3,"click","src"],["class","mt-2 d-block",4,"ngIf","ngIfElse"],[1,"mt-2","d-block"],["appearance","outline",3,"status","text",4,"ngFor","ngForOf"],["appearance","outline",3,"status","text"],[1,"d-block"],["appearance","outline","text","No Linked Categories",1,"mt-2"],["nbButton","","fullWidth","","status","info","size","large",1,"col","m-2"],["icon","shopping-bag"],["icon","shopping-cart"],["nbButton","","fullWidth","","status","basic","size","large","target","_blank",1,"col","m-2",3,"href"],["icon","message-circle",2,"color","basic"],[2,"color","basic"]],template:function(n,s){n&1&&(o(0,"div",2)(1,"div",3)(2,"button",4),b("click",function(v){return s.goBack(v)}),m(3,"nb-icon",5),o(4,"div"),l(5),u(6,"translate"),a()()(),o(7,"div",6)(8,"h1",7),l(9),a()()(),f(10,ne,35,14,"div",8)),n&2&&(c(5),A(h(6,3,"BTN_BACK")),c(4),g(" ",(s.service==null||s.service.data==null?null:s.service.data.name)||"Loading"," "),c(),d("ngIf",s.service==null?null:s.service.data))},dependencies:[M,L,W,j,q,R,_t,mt,wt,St,U,$],styles:[".hundred[_ngcontent-%COMP%]{width:100%;max-width:100%;border-radius:1%}"]});let e=i;return e})();var Vt=(()=>{let i=class i{constructor(t,n){this.router=t,this.injector=n,this.executed=!1,this.waiting=!1,this.category=n.get(G),this.product=n.get(w)}ngOnDestroy(){this.filterDetector&&!this.filterDetector.closed&&this.filterDetector.unsubscribe()}initializeFilterDetector(){this.filterDetector=this.category.hasDataChanges.subscribe({next:t=>this.updateQueryParams(t)})}updateQueryParams(t,n){if(!t?.length&&!n||this.waiting)return;this.waiting=!0,setTimeout(()=>this.waiting=!1,1e3);let _=t.filter(y=>y?.selected).map(y=>y.id).join(","),v={queryParams:{categories:_}};this.router.navigate(["pages/product/list"],n||_?.length&&v||{})}resolve(t,n){if(t?.routeConfig?.path!="list")return this.filterDetector.unsubscribe();(!this.filterDetector||this.filterDetector.closed)&&this.initializeFilterDetector();let _={queryParams:t?.queryParams},v=t?.queryParams?.categories,y=t?.queryParams?.products,J=t?.queryParams?.field,X=t?.queryParams?.key,rt=v?.length>0,ot=y?.length>0;if(!this.executed&&(rt||ot))return this.router.navigate(["pages/product/list"],_),this.updateQueryParams([],_),this.executed=!0;this.product.clearFilter(),rt&&this.product.setFilter({field:"categories.categoryid",key:v}),ot&&this.product.setFilter({field:"categories.productid",key:y}),J&&X&&setTimeout(()=>{this.product.setFilter({field:J,key:X}),this.product.refreshData()},1e3),J&&X||setTimeout(()=>this.product.refreshData(),500)}};i.\u0275fac=function(n){return new(n||i)(Z(z),Z(I))},i.\u0275prov=ct({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();var re=[{path:"list",resolve:{filterData:Vt},runGuardsAndResolvers:"always",component:Dt},{path:"view/:id",component:Ft},{path:"**",redirectTo:"list"}],At=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=D({type:i}),i.\u0275inj=T({imports:[nt.forChild(re),nt]});let e=i;return e})();var Ve=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=D({type:i}),i.\u0275inj=T({imports:[dt,kt,Tt,vt,bt,ut,Et,yt,Pt,At]});let e=i;return e})();export{Ve as ProductModule};
